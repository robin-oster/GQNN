import{_ as v}from"./preload-helper-CsYsLKPR.min.js";import{l as D}from"./logger-BTW-zIW3.js";import{t as G,f as O}from"./tippy.esm-C2cIAwYP.min.js";import{n as f,H as j}from"./highlight-in-textarea-B9VLDWt4.js";import{T as H}from"./tribute.esm-DK9UGgwV.min.js";import{settingsState as w,brxGlobalProp as l,brxIframe as M,brxIframeGlobalProp as o}from"./constant-ClLhar2j.js";import{d as W}from"./debounce-BB-8SLfJ.min.js";import{c as z,a as V}from"./index-lmgDaERr.min.js";import{V as k,n as d,w as x}from"./runtime-core.esm-bundler-HqF9pg4M.min.js";import"./virtualRef-CgRKHaPH.js";import"./index-l5GBeiGs.min.js";import"./isObject-K1YoVIH1.min.js";import"./set-Dt5k9sTt.min.js";import"./_toKey-BxB36GnB.min.js";import"./get-DBhW7rda.min.js";import"./index-BAMY2Nnw.min.js";import"./index-CgqXENQe.min.js";(async()=>{let _=null;(async()=>_=await z({themes:[v(()=>import("./dark-plus-C3mMm8J8.min.js"),[],import.meta.url),v(()=>import("./light-plus-B7mTdjB0.min.js"),[],import.meta.url)],langs:[v(()=>import("./css-DPfMkruS.min.js"),[],import.meta.url)],engine:V(v(()=>import("./wasm-CG6Dc4jp.min.js"),[],import.meta.url))}))();const n=document.createRange().createContextualFragment(`
    <textarea id="windpressbricks-plc-input" class="windpressbricks-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressbricks-plc-input"),E=document.createRange().createContextualFragment(`
    <div class="windpressbricks-plc-action-container">
        <div class="actions">
        </div>
    </div>
`).querySelector(".windpressbricks-plc-action-container"),C=E.querySelector(".actions"),y=document.createRange().createContextualFragment(`
    <span id="windpressbricks-plc-class-sort" class="bricks-svg-wrapper windpressbricks-plc-class-sort" data-balloon="Automatic Class Sorting" data-balloon-pos="bottom-right">
        <svg  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="bricks-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
    </span>
`).querySelector("#windpressbricks-plc-class-sort"),L=document.createRange().createContextualFragment(`
    <span id="windpressbricks-plc-class-down" class="bricks-svg-wrapper windpressbricks-plc-class-down" data-balloon="Move Classes to Plain Classes" data-balloon-pos="bottom-right">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"><!-- Icon from Lucide by Lucide Contributors - https://github.com/lucide-icons/lucide/blob/main/LICENSE --><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3.5 13h6M2 16l4.5-9l4.5 9m7-9v9m-4-4l4 4l4-4"/></svg>    
    </span>
`).querySelector("#windpressbricks-plc-class-down");C.appendChild(L),C.appendChild(y);const b=k(!1),g=k(null);let $=null;f(n);let S=[];wp.hooks.addAction("windpressbricks-autocomplete-items-refresh","windpressbricks",()=>{S=wp.hooks.applyFilters("windpressbricks-autocomplete-items",[],n.value)}),wp.hooks.doAction("windpressbricks-autocomplete-items-refresh");const c=new H({containerClass:"windpressbricks-tribute-container",autocompleteMode:!0,menuItemLimit:50,noMatchTemplate:"",values:async function(e,t){if(!w("module.plain-classes.autocomplete",!0).value){t([]);return}const s=await wp.hooks.applyFilters("windpressbricks-autocomplete-items-query",S,e);t(s)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let t="";return e.original.color!==void 0&&(t+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(t+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${t}"></span>
        `}});c.setMenuContainer=function(e){this.menuContainer=e};const q=c.events.callbacks;c.events.callbacks=function(){return{...q.call(this),up:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let s=this.tribute.current.filteredItems.length,a=this.tribute.menuSelected;s>a&&a>0?(this.tribute.menuSelected--,this.setActiveLi()):a===0&&(this.tribute.menuSelected=s-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),I()}},down:(e,t)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let s=this.tribute.current.filteredItems.length-1,a=this.tribute.menuSelected;s>a?(this.tribute.menuSelected++,this.setActiveLi()):s===a&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),I()}}}},c.attach(n),new MutationObserver(function(e){e.forEach(function(t){t.type==="attributes"?t.target.id==="bricks-panel-element"&&t.attributeName==="style"?t.target.style.display!=="none"?b.value=!0:b.value=!1:t.attributeName==="placeholder"&&t.target.tagName==="INPUT"&&t.target.classList.contains("placeholder")&&(g.value=l.$_activeElement.value.id):t.type==="childList"&&t.addedNodes.length>0&&(t.target.id==="bricks-panel-sticky"&&t.addedNodes[0].id==="bricks-panel-element-classes"?g.value=l.$_activeElement.value.id:t.target.dataset&&t.target.dataset.controlkey==="_cssClasses"&&t.addedNodes[0].childNodes.length>0&&document.querySelector("#_cssClasses").addEventListener("input",function(s){d(()=>{n.value=s.target.value,m()})}))})}).observe(document.getElementById("bricks-panel-element"),{subtree:!0,attributes:!0,childList:!0}),x([g,b],(e,t)=>{e[0]!==t[0]&&d(()=>{var s,a;n.value=((a=(s=l.$_activeElement.value)==null?void 0:s.settings)==null?void 0:a._cssClasses)||"",m()}),e[0]&&e[1]&&d(()=>{const s=document.querySelector("#bricks-panel-element-classes");w("module.plain-classes.input-field",!0).value&&s.querySelector(".windpressbricks-plc-input")===null&&(s.appendChild(E),s.appendChild(n),$=new j(n,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),f.update(n))})}),n.addEventListener("input",function(e){l.$_activeElement.value.settings._cssClasses=e.target.value});function m(){d(()=>{try{$.handleInput()}catch{}f.update(n),c.hideMenu()})}n.addEventListener("highlights-updated",function(e){T()});let p=G(document.createElement("div"),{plugins:[O],allowHTML:!0,arrow:!1,duration:[500,0],followCursor:!0,trigger:"manual"});function T(){const e=document.querySelector(".hit-container");if(e===null)return;p.reference=e;async function t(i){const r=i.textContent,u=await M.contentWindow.windpress.module.classnameToCss.generate(r);if(u===null||u.trim()==="")return null;p.setContent(_.codeToHtml(u,{lang:"css",theme:"dark-plus"})),p.show()}const s=k(null),a=W(function(i){if(!w("module.plain-classes.hover-preview-classes",!0).value)return;const r=i.clientX,u=i.clientY,F=document.elementsFromPoint(r,u).find(R=>R.matches('mark[class="word"]'));s.value=F||null},10);e.addEventListener("mousemove",a),e.addEventListener("mouseleave",function(i){a.cancel(),s.value=null}),x(s,(i,r)=>{i&&i!==r?t(i):p.hide()})}const A=new MutationObserver(function(e){e.forEach(function(t){t.type==="childList"&&t.addedNodes.length>0&&t.addedNodes.forEach(s=>{const a=s.querySelector(".class-name").dataset.tributeClassName;s.addEventListener("mouseenter",i=>{P(a)}),s.addEventListener("mouseleave",i=>{N()}),s.addEventListener("click",i=>{N()})})})});let h=null;n.addEventListener("tribute-active-true",function(e){h===null&&(h=document.querySelector(".windpressbricks-tribute-container>ul")),d(()=>{h&&A.observe(h,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),y.addEventListener("click",async function(e){n.value=await M.contentWindow.windpress.module.classSorter.sort(n.value),l.$_activeElement.value.settings._cssClasses=n.value,m()}),L.addEventListener("click",async function(e){var a;const t=l.$_activeElement.value,s=n.value.split(" ");((a=t.settings)!=null&&a._cssGlobalClasses?[...t.settings._cssGlobalClasses]:[]).forEach(i=>{let r=l.$_getGlobalClassName(i);s.includes(r)||s.push(r)}),n.value=s.join(" "),l.$_activeElement.value.settings._cssClasses=n.value,l.$_activeElement.value.settings._cssGlobalClasses=[],m()});function P(e){o.$_getElementNode(o.$_activeElement.value).classList.add(e)}function N(){const e=o.$_activeElement.value,t=o.$_getElementNode(e),s=o.$_getElementClasses(e);t.classList.value=s.join(" ")}function I(){let e=c.menu.querySelector("li.highlight>span.class-name");const t=o.$_activeElement.value,s=o.$_getElementNode(t),a=o.$_getElementClasses(t);s.classList.value=a.join(" ")+" "+e.dataset.tributeClassName}D("Module loaded!",{module:"plain-classes"})})();
