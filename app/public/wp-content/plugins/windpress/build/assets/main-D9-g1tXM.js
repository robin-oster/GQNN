import{_ as p}from"./preload-helper-CsYsLKPR.min.js";import{l as $}from"./logger-BTW-zIW3.js";import{t as H,f as W}from"./tippy.esm-C2cIAwYP.min.js";import{n as g,H as z}from"./highlight-in-textarea-B9VLDWt4.js";import{T as V}from"./tribute.esm-DK9UGgwV.min.js";import{iframeScope as r,oxyIframe as v,oxygenScope as I}from"./constant-DFowkQsk.js";import{d as j}from"./debounce-BB-8SLfJ.min.js";import{c as B,a as X}from"./index-lmgDaERr.min.js";import{V as f,w as T,n as u}from"./runtime-core.esm-bundler-HqF9pg4M.min.js";import"./isObject-K1YoVIH1.min.js";import"./index-BAMY2Nnw.min.js";import"./index-CgqXENQe.min.js";(async()=>{let w=null;(async()=>w=await B({themes:[p(()=>import("./dark-plus-C3mMm8J8.min.js"),[],import.meta.url),p(()=>import("./light-plus-B7mTdjB0.min.js"),[],import.meta.url)],langs:[p(()=>import("./css-DPfMkruS.min.js"),[],import.meta.url)],engine:X(p(()=>import("./wasm-CG6Dc4jp.min.js"),[],import.meta.url))}))();const i=document.createRange().createContextualFragment(`
    <textarea id="windpressoxygen-plc-input" class="windpressoxygen-plc-input" rows="2" spellcheck="false"></textarea>
`).querySelector("#windpressoxygen-plc-input"),y=document.createRange().createContextualFragment(`
    <div class="windpressoxygen-plc-action-container">
        <div class="actions">
        </div>
    </div>
`).querySelector(".windpressoxygen-plc-action-container"),q=y.querySelector(".actions"),b=document.createRange().createContextualFragment(`
        <span id="windpressoxygen-plc-class-sort" class="oxygen-svg-wrapper windpressoxygen-plc-class-sort">
            <svg  xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 24 24"  fill="none"  stroke="currentColor"  stroke-width="2"  stroke-linecap="round"  stroke-linejoin="round" class="oxygen-svg icon icon-tabler icons-tabler-outline icon-tabler-reorder"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M10 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M17 15m0 1a1 1 0 0 1 1 -1h2a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1z" /><path d="M5 11v-3a3 3 0 0 1 3 -3h8a3 3 0 0 1 3 3v3" /><path d="M16.5 8.5l2.5 2.5l2.5 -2.5" /></svg>    
        </span>
`).querySelector("#windpressoxygen-plc-class-sort");q.appendChild(b);const x=f(!1),h=f(null);let C=null;g(i);let L=[];wp.hooks.addAction("windpressoxygen-autocomplete-items-refresh","windpressoxygen",()=>{L=wp.hooks.applyFilters("windpressoxygen-autocomplete-items",[],i.value)}),wp.hooks.doAction("windpressoxygen-autocomplete-items-refresh");const c=new V({containerClass:"windpressoxygen-tribute-container",autocompleteMode:!0,menuItemLimit:40,noMatchTemplate:"",values:async function(e,n){const t=await wp.hooks.applyFilters("windpressoxygen-autocomplete-items-query",L,e);n(t)},lookup:"value",itemClass:"class-item",menuItemTemplate:function(e){let n="";return e.original.color!==void 0&&(n+=`background-color: ${e.original.color};`),e.original.fontWeight!==void 0&&(n+=`font-weight: ${e.original.fontWeight};`),`
            <span class="class-name" data-tribute-class-name="${e.original.value}">${e.string}</span>
            <span class="class-hint" style="${n}"></span>
        `}});c.setMenuContainer=function(e){this.menuContainer=e};const F=c.events.callbacks;c.events.callbacks=function(){return{...F.call(this),up:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let t=this.tribute.current.filteredItems.length,s=this.tribute.menuSelected;t>s&&s>0?(this.tribute.menuSelected--,this.setActiveLi()):s===0&&(this.tribute.menuSelected=t-1,this.setActiveLi(),this.tribute.menu.scrollTop=this.tribute.menu.scrollHeight),A()}},down:(e,n)=>{if(this.tribute.isActive&&this.tribute.current.filteredItems){e.preventDefault(),e.stopPropagation();let t=this.tribute.current.filteredItems.length-1,s=this.tribute.menuSelected;t>s?(this.tribute.menuSelected++,this.setActiveLi()):t===s&&(this.tribute.menuSelected=0,this.setActiveLi(),this.tribute.menu.scrollTop=0),A()}}}},c.attach(i),new MutationObserver(function(e){x.value=!e[0].target.classList.contains("ng-hide")}).observe(document.querySelector(".oxygen-sidebar-currently-editing"),{attributes:!0,attributeFilter:["class"]});const N=r.activateComponent;r.activateComponent=function(e,n,t){N(e,n,t),h.value=r.component.active.id};function S(e){const n=r.component.active.id,t=r.component.active.name;if(n===0)return;const s=r.component.options[n];if(s.model===void 0)return;s.model["custom-attributes"]===void 0&&I.addCustomAttribute("plainclass",e);const o=s.model["custom-attributes"],a=o.find(l=>l.name==="plainclass");a?a.value=e:o.push({name:"plainclass",value:e}),r.component.options[n].model["custom-attributes"]=o,r.setOption(n,t,"custom-attributes"),r.applyCustomAttributes(n)}T([h,x],(e,n)=>{e[0]!==n[0]&&u(()=>{var a;const t=r.component.active.id;if(t===0)return;const s=r.component.options[t];if(s.model===void 0)return;s.model["custom-attributes"]===void 0&&I.addCustomAttribute("plainclass","");const o=s.model["custom-attributes"];i.value=((a=o==null?void 0:o.find(l=>l.name==="plainclass"))==null?void 0:a.value)||"",_()}),e[0]&&e[1]&&u(()=>{const t=document.querySelector(".oxygen-sidebar-currently-editing");t.querySelector(".windpressoxygen-plc-input")===null&&(t.appendChild(y),window.tippy(".windpressoxygen-plc-class-sort",{content:"Automatic Class Sorting",animation:"shift-toward",placement:"right"}),t.appendChild(i),C=new z(i,{highlight:[{highlight:new RegExp("(?<=\\s|^)(?:(?!\\s).)+(?=\\s|$)","g"),className:"word"},{highlight:new RegExp("(?<=\\s)\\s","g"),className:"multispace",blank:!0}]}),g.update(i))})}),i.addEventListener("input",function(e){S(e.target.value)});function _(){u(()=>{try{C.handleInput()}catch{}g.update(i),c.hideMenu()})}i.addEventListener("highlights-updated",function(e){O()});let d=H(document.createElement("div"),{plugins:[W],allowHTML:!0,arrow:!1,duration:[500,0],followCursor:!0,trigger:"manual"});function O(){const e=document.querySelector(".hit-container");if(e===null)return;d.reference=e;async function n(o){const a=o.textContent,l=await v.contentWindow.windpress.module.classnameToCss.generate(a);if(l===null||l.trim()==="")return null;d.setContent(w.codeToHtml(l,{lang:"css",theme:"dark-plus"})),d.show()}const t=f(null),s=j(function(o){const a=o.clientX,l=o.clientY,R=document.elementsFromPoint(a,l).find(D=>D.matches('mark[class="word"]'));t.value=R||null},10);e.addEventListener("mousemove",s),e.addEventListener("mouseleave",function(o){s.cancel(),t.value=null}),T(t,(o,a)=>{o&&o!==a?n(o):d.hide()})}const P=new MutationObserver(function(e){e.forEach(function(n){n.type==="childList"&&n.addedNodes.length>0&&n.addedNodes.forEach(t=>{t.addEventListener("mouseenter",s=>{const o=t.querySelector(".class-name").dataset.tributeClassName;E(o)}),t.addEventListener("mouseleave",s=>{k()}),t.addEventListener("click",s=>{k()})})})});let m=null;i.addEventListener("tribute-active-true",function(e){m===null&&(m=document.querySelector(".windpressoxygen-tribute-container>ul")),u(()=>{m&&P.observe(m,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class"]})})}),b.addEventListener("click",async function(e){i.value=await v.contentWindow.windpress.module.classSorter.sort(i.value),S(i.value),_()});function E(e){M({action:"windpressoxygen-preview-class",do:"add",elementId:h.value,className:e})}function k(){M({action:"windpressoxygen-preview-class",do:"remove"})}function A(){u(()=>{let e=c.menu.querySelector("li.highlight>span.class-name");E(e.dataset.tributeClassName)})}function M(e){v.contentWindow.postMessage(e,"*")}$("Module loaded!",{module:"plain-classes"})})();
