import{n as z}from"./index.browser-B0na17u1.min.js";import{V as I,a6 as Re,aj as Q,m as ve,_ as V,$ as ee,Z as E,ak as N,an as Z,a1 as W,X as Ye,Y as X,j as R,a3 as ge,al as Ue}from"./runtime-core.esm-bundler-HqF9pg4M.min.js";import{d as Be,p as He,N as ze,a as Ve}from"./dashboard-DzHlilbd.js";import{w as q}from"./runtime-dom.esm-bundler-CZCO9KQc.min.js";import{i as te}from"./index-l5GBeiGs.min.js";function Ze(e,n){const t=I([]),r=Re(()=>{const u=[];function g(o){for(const a of o)a.value&&u.push(a.value),a.children&&a.children.length>0&&g(a.children)}return g(t.value),u});function l(u){return Object.entries(u||{}).map(([g,o])=>{if(g==="$value")return null;const a={value:z(7),var:{key:g,value:o},defaultExpanded:!0,onToggle:s=>{s.preventDefault()}};if(typeof o=="object"&&o!==null){a.children=l(o);const s=o;s.$value!==void 0?a.var.value=s.$value:a.var.value=""}else a.var.value=o;return a}).filter(g=>g!==null)}function d(){try{const u=o=>{var a;if(!((a=o.var)!=null&&a.key))return null;if(o.children&&o.children.length>0){const s={};return o.children.forEach(i=>{const y=u(i);y&&Object.assign(s,y)}),o.var.value!==void 0&&o.var.value!==null&&(s.$value=o.var.value),{[o.var.key]:s}}else if(o.var.value!==void 0&&o.var.value!==null)return{[o.var.key]:o.var.value};return null},g={};t.value.forEach(o=>{const a=u(o);a&&Object.assign(g,a)}),n.value.namespaces[e]=g}catch(u){console.error("Error updating theme from items:",u)}}function c(u,g){for(const o of u){if(o.value===g)return o;if(o.children&&o.children.length>0){const a=c(o.children,g);if(a)return a}}}function f(u,g){for(const o of u){if(o.children&&o.children.includes(g))return o;if(o.children){const a=f(o.children,g);if(a)return a}}}function p(u,g=!0){const o=u.split("-");let a=t.value,s=null;for(let i=0;i<o.length;i++){const y=o[i],m=i===o.length-1;let b=a.find(w=>w.var.key===y);if(!b){if(!g)return null;const w={value:z(7),var:{key:y,value:""},defaultExpanded:!0,children:[],onToggle:T=>{T.preventDefault()}};a.push(w),b=w}s=b,m||(s.children||(s.children=[]),a=s.children)}return s}function v(u,g,o){const a=c(t.value,u);if(!a){console.error("Item not found for uid:",u);return}const s={value:z(7),var:{key:g||"",value:o!==void 0?o:""},defaultExpanded:!0,children:[],onToggle:i=>{i.preventDefault()}};a.children?a.children.push(s):a.children=[s]}function D(u,g,o){var y;const a={value:z(7),var:{key:g||"",value:o!==void 0?o:""},defaultExpanded:!0,children:[],onToggle:m=>{m.preventDefault()}};if(!u){t.value.push(a);return}const s=c(t.value,u);if(!s)return;const i=f(t.value,s);if(i&&i.children){const m=(y=i.children)==null?void 0:y.indexOf(s);m!==void 0&&m>=0&&i.children.splice(m+1,0,a)}else{const m=t.value.indexOf(s);m>=0&&t.value.splice(m+1,0,a)}}function h(u){const g=c(t.value,u);if(!g){console.error("Item not found for uid:",u);return}const o=f(t.value,g);if(o&&o.children){const a=o.children.indexOf(g);a>=0&&o.children.splice(a,1)}else{const a=t.value.indexOf(g);a>=0&&t.value.splice(a,1)}}function O(){t.value=l(n.value.namespaces[e])}return{expandedTree:r,items:t,namespaceToTree:l,updateThemeFromItems:d,findItemByUid:c,findOrCreateItemByKey:p,addChild:v,addNext:D,deleteItem:h,initializeItems:O}}function qe(e){if(Array.isArray(e))return e}function Ge(e,n){var t=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(t!=null){var r,l,d,c,f=[],p=!0,v=!1;try{if(d=(t=t.call(e)).next,n!==0)for(;!(p=(r=d.call(t)).done)&&(f.push(r.value),f.length!==n);p=!0);}catch(D){v=!0,l=D}finally{try{if(!p&&t.return!=null&&(c=t.return(),Object(c)!==c))return}finally{if(v)throw l}}return f}}function ne(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function me(e,n){if(e){if(typeof e=="string")return ne(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ne(e,n):void 0}}function Je(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ye(e,n){return qe(e)||Ge(e,n)||me(e,n)||Je()}var he={},Y={},be;function we(){if(be)return Y;be=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.bind=void 0;function e(n,t){var r=t.type,l=t.listener,d=t.options;return n.addEventListener(r,l,d),function(){n.removeEventListener(r,l,d)}}return Y.bind=e,Y}var C={},De;function Qe(){if(De)return C;De=1;var e=C&&C.__assign||function(){return e=Object.assign||function(d){for(var c,f=1,p=arguments.length;f<p;f++){c=arguments[f];for(var v in c)Object.prototype.hasOwnProperty.call(c,v)&&(d[v]=c[v])}return d},e.apply(this,arguments)};Object.defineProperty(C,"__esModule",{value:!0}),C.bindAll=void 0;var n=we();function t(d){if(!(typeof d>"u"))return typeof d=="boolean"?{capture:d}:d}function r(d,c){if(c==null)return d;var f=e(e({},d),{options:e(e({},t(c)),t(d.options))});return f}function l(d,c,f){var p=c.map(function(v){var D=r(v,f);return(0,n.bind)(d,D)});return function(){p.forEach(function(v){return v()})}}return C.bindAll=l,C}var Oe;function et(){return Oe||(Oe=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bindAll=e.bind=void 0;var n=we();Object.defineProperty(e,"bind",{enumerable:!0,get:function(){return n.bind}});var t=Qe();Object.defineProperty(e,"bindAll",{enumerable:!0,get:function(){return t.bindAll}})}(he)),he}var M=et(),xe="data-pdnd-honey-pot";function Te(e){return e instanceof Element&&e.hasAttribute(xe)}function Ae(e){var n=document.elementsFromPoint(e.x,e.y),t=ye(n,2),r=t[0],l=t[1];return r?Te(r)?l??null:r:null}function U(e){"@babel/helpers - typeof";return U=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},U(e)}function tt(e,n){if(U(e)!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var r=t.call(e,n);if(U(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(n==="string"?String:Number)(e)}function nt(e){var n=tt(e,"string");return U(n)=="symbol"?n:n+""}function re(e,n,t){return(n=nt(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var rt=2147483647;function Se(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,r)}return t}function je(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Se(Object(t),!0).forEach(function(r){re(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Se(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}var B=2,Ee=B/2;function ot(e){return{x:Math.floor(e.x),y:Math.floor(e.y)}}function at(e){return{x:e.x-Ee,y:e.y-Ee}}function it(e){return{x:Math.max(e.x,0),y:Math.max(e.y,0)}}function lt(e){return{x:Math.min(e.x,window.innerWidth-B),y:Math.min(e.y,window.innerHeight-B)}}function Pe(e){var n=e.client,t=lt(it(at(ot(n))));return DOMRect.fromRect({x:t.x,y:t.y,width:B,height:B})}function Ie(e){var n=e.clientRect;return{left:"".concat(n.left,"px"),top:"".concat(n.top,"px"),width:"".concat(n.width,"px"),height:"".concat(n.height,"px")}}function ut(e){var n=e.client,t=e.clientRect;return n.x>=t.x&&n.x<=t.x+t.width&&n.y>=t.y&&n.y<=t.y+t.height}function ct(e){var n=e.initial,t=document.createElement("div");t.setAttribute(xe,"true");var r=Pe({client:n});Object.assign(t.style,je(je({backgroundColor:"transparent",position:"fixed",padding:0,margin:0,boxSizing:"border-box"},Ie({clientRect:r})),{},{pointerEvents:"auto",zIndex:rt})),document.body.appendChild(t);var l=M.bind(window,{type:"pointermove",listener:function(d){var c={x:d.clientX,y:d.clientY};r=Pe({client:c}),Object.assign(t.style,Ie({clientRect:r}))},options:{capture:!0}});return function(d){var c=d.current;if(l(),ut({client:c,clientRect:r})){t.remove();return}function f(){p(),t.remove()}var p=M.bindAll(window,[{type:"pointerdown",listener:f},{type:"pointermove",listener:f},{type:"focusin",listener:f},{type:"focusout",listener:f},{type:"dragstart",listener:f},{type:"dragenter",listener:f},{type:"dragover",listener:f}],{capture:!0})}}function st(){var e=null;function n(){return e=null,M.bind(window,{type:"pointermove",listener:function(r){e={x:r.clientX,y:r.clientY}},options:{capture:!0}})}function t(){var r=null;return function(l){var d=l.eventName,c=l.payload;if(d==="onDragStart"){var f=c.location.initial.input,p=e??{x:f.clientX,y:f.clientY};r=ct({initial:p})}if(d==="onDrop"){var v,D=c.location.current.input;(v=r)===null||v===void 0||v({current:{x:D.clientX,y:D.clientY}}),r=null,e=null}}}return{bindEvents:n,getOnPostDispatch:t}}function dt(e){if(Array.isArray(e))return ne(e)}function ft(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ke(e){return dt(e)||ft(e)||me(e)||pt()}function F(e){var n=null;return function(){if(!n){for(var t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];var d=e.apply(this,r);n={result:d}}return n.result}}var vt=F(function(){return navigator.userAgent.includes("Firefox")}),oe=F(function(){var e=navigator,n=e.userAgent;return n.includes("AppleWebKit")&&!n.includes("Chrome")}),ae={isLeavingWindow:Symbol("leaving"),isEnteringWindow:Symbol("entering")};function gt(e){var n=e.dragLeave;return oe()?n.hasOwnProperty(ae.isLeavingWindow):!1}(function(){if(typeof window>"u"||!oe())return;function e(){return{enterCount:0,isOverWindow:!1}}var n=e();function t(){n=e()}M.bindAll(window,[{type:"dragstart",listener:function(){n.enterCount=0,n.isOverWindow=!0}},{type:"drop",listener:t},{type:"dragend",listener:t},{type:"dragenter",listener:function(r){!n.isOverWindow&&n.enterCount===0&&(r[ae.isEnteringWindow]=!0),n.isOverWindow=!0,n.enterCount++}},{type:"dragleave",listener:function(r){n.enterCount--,n.isOverWindow&&n.enterCount===0&&(r[ae.isLeavingWindow]=!0,n.isOverWindow=!1)}}],{capture:!0})})();function mt(e){return"nodeName"in e}function yt(e){return mt(e)&&e.ownerDocument!==document}function ht(e){var n=e.dragLeave,t=n.type,r=n.relatedTarget;return t!=="dragleave"?!1:oe()?gt({dragLeave:n}):r==null?!0:vt()?yt(r):r instanceof HTMLIFrameElement}function bt(e){var n=e.onDragEnd;return[{type:"pointermove",listener:function(){var t=0;return function(){if(t<20){t++;return}n()}}()},{type:"pointerdown",listener:n}]}function H(e){return{altKey:e.altKey,button:e.button,buttons:e.buttons,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}}var wt=function(e){var n=[],t=null,r=function(){for(var l=arguments.length,d=new Array(l),c=0;c<l;c++)d[c]=arguments[c];n=d,!t&&(t=requestAnimationFrame(function(){t=null,e.apply(void 0,n)}))};return r.cancel=function(){t&&(cancelAnimationFrame(t),t=null)},r},ie=wt(function(e){return e()}),G=function(){var e=null;function n(r){var l=requestAnimationFrame(function(){e=null,r()});e={frameId:l,fn:r}}function t(){e&&(cancelAnimationFrame(e.frameId),e.fn(),e=null)}return{schedule:n,flush:t}}();function Dt(e){var n=e.source,t=e.initial,r=e.dispatchEvent,l={dropTargets:[]};function d(f){r(f),l={dropTargets:f.payload.location.current.dropTargets}}var c={start:function(f){var p=f.nativeSetDragImage,v={current:t,previous:l,initial:t};d({eventName:"onGenerateDragPreview",payload:{source:n,location:v,nativeSetDragImage:p}}),G.schedule(function(){d({eventName:"onDragStart",payload:{source:n,location:v}})})},dragUpdate:function(f){var p=f.current;G.flush(),ie.cancel(),d({eventName:"onDropTargetChange",payload:{source:n,location:{initial:t,previous:l,current:p}}})},drag:function(f){var p=f.current;ie(function(){G.flush();var v={initial:t,previous:l,current:p};d({eventName:"onDrag",payload:{source:n,location:v}})})},drop:function(f){var p=f.current,v=f.updatedSourcePayload;G.flush(),ie.cancel(),d({eventName:"onDrop",payload:{source:v??n,location:{current:p,previous:l,initial:t}}})}};return c}var le={isActive:!1};function Ce(){return!le.isActive}function Ot(e){return e.dataTransfer?e.dataTransfer.setDragImage.bind(e.dataTransfer):null}function xt(e){var n=e.current,t=e.next;if(n.length!==t.length)return!0;for(var r=0;r<n.length;r++)if(n[r].element!==t[r].element)return!0;return!1}function Tt(e){var n=e.event,t=e.dragType,r=e.getDropTargetsOver,l=e.dispatchEvent;if(!Ce())return;var d=At({event:n,dragType:t,getDropTargetsOver:r});le.isActive=!0;var c={current:d};ue({event:n,current:d.dropTargets});var f=Dt({source:t.payload,dispatchEvent:l,initial:d});function p(u){var g=xt({current:c.current.dropTargets,next:u.dropTargets});c.current=u,g&&f.dragUpdate({current:c.current})}function v(u){var g=H(u),o=Te(u.target)?Ae({x:g.clientX,y:g.clientY}):u.target,a=r({target:o,input:g,source:t.payload,current:c.current.dropTargets});a.length&&(u.preventDefault(),ue({event:u,current:a})),p({dropTargets:a,input:g})}function D(){c.current.dropTargets.length&&p({dropTargets:[],input:c.current.input}),f.drop({current:c.current,updatedSourcePayload:null}),h()}function h(){le.isActive=!1,O()}var O=M.bindAll(window,[{type:"dragover",listener:function(u){v(u),f.drag({current:c.current})}},{type:"dragenter",listener:v},{type:"dragleave",listener:function(u){ht({dragLeave:u})&&(p({input:c.current.input,dropTargets:[]}),t.startedFrom==="external"&&D())}},{type:"drop",listener:function(u){if(c.current={dropTargets:c.current.dropTargets,input:H(u)},!c.current.dropTargets.length){D();return}u.preventDefault(),ue({event:u,current:c.current.dropTargets}),f.drop({current:c.current,updatedSourcePayload:t.type==="external"?t.getDropPayload(u):null}),h()}},{type:"dragend",listener:function(u){c.current={dropTargets:c.current.dropTargets,input:H(u)},D()}}].concat(ke(bt({onDragEnd:D}))),{capture:!0});f.start({nativeSetDragImage:Ot(n)})}function ue(e){var n,t=e.event,r=e.current,l=(n=r[0])===null||n===void 0?void 0:n.dropEffect;l!=null&&t.dataTransfer&&(t.dataTransfer.dropEffect=l)}function At(e){var n=e.event,t=e.dragType,r=e.getDropTargetsOver,l=H(n);if(t.startedFrom==="external")return{input:l,dropTargets:[]};var d=r({input:l,source:t.payload,target:n.target,current:[]});return{input:l,dropTargets:d}}var Le={canStart:Ce,start:Tt},ce=new Map;function St(e){var n=e.typeKey,t=e.mount,r=ce.get(n);if(r)return r.usageCount++,r;var l={typeKey:n,unmount:t(),usageCount:1};return ce.set(n,l),l}function jt(e){var n=St(e);return function(){n.usageCount--,!(n.usageCount>0)&&(n.unmount(),ce.delete(e.typeKey))}}function K(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return function(){n.forEach(function(r){return r()})}}function _e(e,n){var t=n.attribute,r=n.value;return e.setAttribute(t,r),function(){return e.removeAttribute(t)}}function Ne(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,r)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ne(Object(t),!0).forEach(function(r){re(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ne(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function se(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Et(e))||n){t&&(e=t);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(p){throw p},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,c=!0,f=!1;return{s:function(){t=t.call(e)},n:function(){var p=t.next();return c=p.done,p},e:function(p){f=!0,d=p},f:function(){try{c||t.return==null||t.return()}finally{if(f)throw d}}}}function Et(e,n){if(e){if(typeof e=="string")return Me(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Me(e,n):void 0}}function Me(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function de(e){return e.slice(0).reverse()}function Pt(e){var n=e.typeKey,t=e.defaultDropEffect,r=new WeakMap,l="data-drop-target-for-".concat(n),d="[".concat(l,"]");function c(u){return r.set(u.element,u),function(){return r.delete(u.element)}}function f(u){var g=K(_e(u.element,{attribute:l,value:"true"}),c(u));return F(g)}function p(u){var g,o,a,s,i=u.source,y=u.target,m=u.input,b=u.result,w=b===void 0?[]:b;if(y==null)return w;if(!(y instanceof Element))return y instanceof Node?p({source:i,target:y.parentElement,input:m,result:w}):w;var T=y.closest(d);if(T==null)return w;var x=r.get(T);if(x==null)return w;var A={input:m,source:i,element:x.element};if(x.canDrop&&!x.canDrop(A))return p({source:i,target:x.element.parentElement,input:m,result:w});var S=(g=(o=x.getData)===null||o===void 0?void 0:o.call(x,A))!==null&&g!==void 0?g:{},P=(a=(s=x.getDropEffect)===null||s===void 0?void 0:s.call(x,A))!==null&&a!==void 0?a:t,j={data:S,element:x.element,dropEffect:P,isActiveDueToStickiness:!1};return p({source:i,target:x.element.parentElement,input:m,result:[].concat(ke(w),[j])})}function v(u){var g=u.eventName,o=u.payload,a=se(o.location.current.dropTargets),s;try{for(a.s();!(s=a.n()).done;){var i,y=s.value,m=r.get(y.element),b=k(k({},o),{},{self:y});m==null||(i=m[g])===null||i===void 0||i.call(m,b)}}catch(w){a.e(w)}finally{a.f()}}var D={onGenerateDragPreview:v,onDrag:v,onDragStart:v,onDrop:v,onDropTargetChange:function(u){var g=u.payload,o=new Set(g.location.current.dropTargets.map(function($){return $.element})),a=new Set,s=se(g.location.previous.dropTargets),i;try{for(s.s();!(i=s.n()).done;){var y,m=i.value;a.add(m.element);var b=r.get(m.element),w=o.has(m.element),T=k(k({},g),{},{self:m});if(b==null||(y=b.onDropTargetChange)===null||y===void 0||y.call(b,T),!w){var x;b==null||(x=b.onDragLeave)===null||x===void 0||x.call(b,T)}}}catch($){s.e($)}finally{s.f()}var A=se(g.location.current.dropTargets),S;try{for(A.s();!(S=A.n()).done;){var P,j,L=S.value;if(!a.has(L.element)){var pe=k(k({},g),{},{self:L}),_=r.get(L.element);_==null||(P=_.onDropTargetChange)===null||P===void 0||P.call(_,pe),_==null||(j=_.onDragEnter)===null||j===void 0||j.call(_,pe)}}}catch($){A.e($)}finally{A.f()}}};function h(u){D[u.eventName](u)}function O(u){var g=u.source,o=u.target,a=u.input,s=u.current,i=p({source:g,target:o,input:a});if(i.length>=s.length)return i;for(var y=de(s),m=de(i),b=[],w=0;w<y.length;w++){var T,x=y[w],A=m[w];if(A!=null){b.push(A);continue}var S=b[w-1],P=y[w-1];if((S==null?void 0:S.element)!==(P==null?void 0:P.element))break;var j=r.get(x.element);if(!j)break;var L={input:a,source:g,element:j.element};if(j.canDrop&&!j.canDrop(L)||!((T=j.getIsSticky)!==null&&T!==void 0&&T.call(j,L)))break;b.push(k(k({},x),{},{isActiveDueToStickiness:!0}))}return de(b)}return{dropTargetForConsumers:f,getIsOver:O,dispatchEvent:h}}function It(e,n){var t=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=kt(e))||n){t&&(e=t);var r=0,l=function(){};return{s:l,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(p){throw p},f:l}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var d,c=!0,f=!1;return{s:function(){t=t.call(e)},n:function(){var p=t.next();return c=p.done,p},e:function(p){f=!0,d=p},f:function(){try{c||t.return==null||t.return()}finally{if(f)throw d}}}}function kt(e,n){if(e){if(typeof e=="string")return Fe(e,n);var t={}.toString.call(e).slice(8,-1);return t==="Object"&&e.constructor&&(t=e.constructor.name),t==="Map"||t==="Set"?Array.from(e):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Fe(e,n):void 0}}function Fe(e,n){(n==null||n>e.length)&&(n=e.length);for(var t=0,r=Array(n);t<n;t++)r[t]=e[t];return r}function Ke(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),t.push.apply(t,r)}return t}function Ct(e){for(var n=1;n<arguments.length;n++){var t=arguments[n]!=null?arguments[n]:{};n%2?Ke(Object(t),!0).forEach(function(r){re(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ke(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function Lt(){var e=new Set,n=null;function t(d){n&&(!d.canMonitor||d.canMonitor(n.canMonitorArgs))&&n.active.add(d)}function r(d){var c=Ct({},d);e.add(c),t(c);function f(){e.delete(c),n&&n.active.delete(c)}return F(f)}function l(d){var c=d.eventName,f=d.payload;if(c==="onGenerateDragPreview"){n={canMonitorArgs:{initial:f.location.initial,source:f.source},active:new Set};var p=It(e),v;try{for(p.s();!(v=p.n()).done;){var D=v.value;t(D)}}catch(a){p.e(a)}finally{p.f()}}if(n){for(var h=Array.from(n.active),O=0,u=h;O<u.length;O++){var g=u[O];if(n.active.has(g)){var o;(o=g[c])===null||o===void 0||o.call(g,f)}}c==="onDrop"&&(n.active.clear(),n=null)}}return{dispatchEvent:l,monitorForConsumers:r}}function _t(e){var n=e.typeKey,t=e.mount,r=e.dispatchEventToSource,l=e.onPostDispatch,d=e.defaultDropEffect,c=Lt(),f=Pt({typeKey:n,defaultDropEffect:d});function p(h){r==null||r(h),f.dispatchEvent(h),c.dispatchEvent(h),l==null||l(h)}function v(h){var O=h.event,u=h.dragType;Le.start({event:O,dragType:u,getDropTargetsOver:f.getIsOver,dispatchEvent:p})}function D(){function h(){var O={canStart:Le.canStart,start:v};return t(O)}return jt({typeKey:n,mount:h})}return{registerUsage:D,dropTarget:f.dropTargetForConsumers,monitor:c.monitorForConsumers}}var Nt=F(function(){return navigator.userAgent.toLocaleLowerCase().includes("android")}),Mt="pdnd:android-fallback",$e="text/plain",Ft="text/uri-list",Kt="application/vnd.pdnd",J=new WeakMap;function $t(e){return J.set(e.element,e),function(){J.delete(e.element)}}var We=st(),fe=_t({typeKey:"element",defaultDropEffect:"move",mount:function(e){return K(We.bindEvents(),M.bind(document,{type:"dragstart",listener:function(n){var t,r,l,d,c,f;if(e.canStart(n)&&!n.defaultPrevented&&n.dataTransfer){var p=n.target;if(!(p instanceof HTMLElement))return null;var v=J.get(p);if(!v)return null;var D=H(n),h={element:v.element,dragHandle:(t=v.dragHandle)!==null&&t!==void 0?t:null,input:D};if(v.canDrag&&!v.canDrag(h))return n.preventDefault(),null;if(v.dragHandle){var O=Ae({x:D.clientX,y:D.clientY});if(!v.dragHandle.contains(O))return n.preventDefault(),null}var u=(r=(l=v.getInitialDataForExternal)===null||l===void 0?void 0:l.call(v,h))!==null&&r!==void 0?r:null;if(u)for(var g=0,o=Object.entries(u);g<o.length;g++){var a=ye(o[g],2),s=a[0],i=a[1];n.dataTransfer.setData(s,i??"")}Nt()&&!n.dataTransfer.types.includes($e)&&!n.dataTransfer.types.includes(Ft)&&n.dataTransfer.setData($e,Mt),n.dataTransfer.setData(Kt,"");var y={element:v.element,dragHandle:(d=v.dragHandle)!==null&&d!==void 0?d:null,data:(c=(f=v.getInitialData)===null||f===void 0?void 0:f.call(v,h))!==null&&c!==void 0?c:{}},m={type:"element",payload:y,startedFrom:"internal"};e.start({event:n,dragType:m})}}}))},dispatchEventToSource:function(e){var n,t,r=e.eventName,l=e.payload;(n=J.get(l.source.element))===null||n===void 0||(t=n[r])===null||t===void 0||t.call(n,l)},onPostDispatch:We.getOnPostDispatch()}),Wt=fe.dropTarget,Xe=fe.monitor;function Xt(e){var n=K(fe.registerUsage(),$t(e),_e(e.element,{attribute:"draggable",value:"true"}));return F(n)}function Rt(e,n,t){const r=I(null),l=I(null);function d(o){return o.instruction?o.instruction:o.type?{type:o.type,currentLevel:o.currentLevel,indentPerLevel:o.indentPerLevel,desiredLevel:o.desiredLevel}:null}function c(o,a){for(let s=0;s<o.length;s++){if(o[s].value===a)return o.splice(s,1),!0;if(o[s].children&&c(o[s].children,a))return!0}return!1}function f(o,a,s){for(let i=0;i<o.length;i++){if(o[i].value===a)return o.splice(i,0,s),!0;if(o[i].children&&f(o[i].children,a,s))return!0}return!1}function p(o,a,s){for(let i=0;i<o.length;i++){if(o[i].value===a)return o.splice(i+1,0,s),!0;if(o[i].children&&p(o[i].children,a,s))return!0}return!1}function v(o,a,s){for(let i=0;i<o.length;i++){if(o[i].value===a)return o[i].children||(o[i].children=[]),o[i].children.unshift(s),!0;if(o[i].children&&v(o[i].children,a,s))return!0}return!1}function D(o,a,s=[]){for(const i of o){if(i.value===a)return s;if(i.children){const y=D(i.children,a,[...s,i.value]);if(y)return y}}}function h(o,a,s){const i=t(e.value,o),y=t(e.value,a);if(!i||!y){console.warn("Source or target item not found in current namespace - cross-namespace drag operations are not supported",{sourceItem:!!i,targetItem:!!y,itemId:o,targetId:a});return}if(c(e.value,o),s.type==="reorder-above")f(e.value,a,i);else if(s.type==="reorder-below")p(e.value,a,i);else if(s.type==="make-child")v(e.value,a,i);else if(s.type==="reparent"){const m=D(e.value,a);if(m&&s.desiredLevel!==void 0&&m.length>s.desiredLevel){const b=m[s.desiredLevel];p(e.value,b,i)}}n(),l.value=o,setTimeout(()=>{l.value=null},1e3)}function O(o,a){const s=t(e.value,o);if(!s)return!1;function i(y){if(!y.children)return!1;for(const m of y.children)if(m.value===a||i(m))return!0;return!1}return i(s)}function u(o){return r.value?o===r.value||O(r.value,o):!1}function g(o){return l.value===o}return Q(o=>{const a=K(Xe({onDrop(s){const{location:i,source:y}=s;if(!i.current.dropTargets.length)return;const m=y.data.id,b=i.current.dropTargets[0],w=b.data.id,T=d(b.data);T!==null&&h(m,w,T)}}));o(()=>{a()})}),Q(o=>{const a=K(Xe({onDragStart({source:s}){r.value=s.data.id},onDrop(s){const{location:i,source:y}=s;if(r.value=null,!i.current.dropTargets.length)return;const m=y.data.id,b=i.current.dropTargets[0],w=b.data.id,T=d(b.data);T!==null?h(m,w,T):h(m,w,{type:"reorder-below"})}}));o(()=>{r.value=null,a()})}),{draggedItemId:r,recentlyMovedItemId:l,shouldBeDimmed:u,wasRecentlyMoved:g,isDescendantOf:O,handleDragAndDrop:h}}const Yt={key:2,class:"absolute text-primary bg-primary/30 backdrop-blur-md px-4 py-2 rounded-lg pointer-events-none top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 font-medium whitespace-nowrap z-10 transition-all duration-150 ease-out"},Ut=ve({__name:"DraggableTreeItem",props:{item:{},level:{},hasChildren:{type:Boolean},isLast:{type:Boolean},isDescendantOf:{type:Function},onDelete:{type:Function}},setup(e){function n(h,O){const{input:u,element:g,indentPerLevel:o,currentLevel:a}=O,s=g.getBoundingClientRect(),i=u.clientY-s.top,y=u.clientX-s.left,m=s.height;let b="reorder-below";return i<m*.33?b="reorder-above":i>m*.67?b="reorder-below":y>o*2?b="make-child":b="reorder-below",{...h,instruction:{type:b,currentLevel:a,indentPerLevel:o}}}function t(h){return h.instruction||null}const r=e,l=I(),d=I(),c=I(),f=I(!1),p=I(!1),v=I(null);function D(h){if(h.key==="Delete"&&r.onDelete){const O=h.target;if(O.tagName==="INPUT"||O.tagName==="TEXTAREA"||O.isContentEditable)return;h.preventDefault(),r.onDelete(r.item.value)}}return Q(h=>{const O=te(l),u=te(d),g=te(c);if(!O||!u||!g)return;const o={id:r.item.value,level:r.level},a=g.querySelector(".drag-and-drop-handler");if(!a){console.warn("No drag handle found for item:",r.item.value);return}const s=K(Xt({element:a,getInitialData:()=>o,onGenerateDragPreview:({nativeSetDragImage:i})=>{var y;if(i){const m=document.createElement("div");m.className="bg-default border border-default rounded-lg p-2 shadow-lg opacity-90 max-w-md font-sans";const b=g.cloneNode(!0);if(b.className="m-0 py-2 px-0 [&_*]:!bg-default [&_*]:!text-highlighted",m.appendChild(b),r.hasChildren&&((y=r.item.children)==null?void 0:y.length)){const A=document.createElement("div");A.className="ml-4 pl-2 border-l-2 border-default";const S=document.createElement("div");S.className="text-sm text-dimmed py-1",S.textContent=`+ ${r.item.children.length} nested item${r.item.children.length>1?"s":""}`,A.appendChild(S),m.appendChild(A)}document.body.appendChild(m);const w=a.getBoundingClientRect(),T=w.width/2,x=w.height/2;i(m,T,x),setTimeout(()=>{document.body.contains(m)&&document.body.removeChild(m)},100)}},onDragStart:()=>{f.value=!0},onDrop:()=>{f.value=!1}}),Wt({element:O,getData:({input:i,element:y})=>{const m={id:r.item.value};return n(m,{input:i,element:y,indentPerLevel:16,currentLevel:r.level})},canDrop:({source:i})=>{const y=i.data.id,m=r.item.value;return!(y===m||r.isDescendantOf&&r.isDescendantOf(y,m))},onDrag:({self:i})=>{v.value=t(i.data)},onDragEnter:({source:i})=>{i.data.id!==r.item.value&&(p.value=!0)},onDragLeave:()=>{p.value=!1,v.value=null},onDrop:()=>{p.value=!1,v.value=null},getIsSticky:()=>!0}));h(()=>s())}),(h,O)=>(W(),V("div",{ref_key:"outerDropZoneRef",ref:l,class:N(["relative w-full px-2.5 py-1.5 transition-all duration-200 ease-out",{"bg-elevated":p.value}]),onKeydown:D,tabindex:"0"},[v.value?(W(),V("div",{key:0,class:N(["absolute pointer-events-none border-primary transition-all duration-150 ease-out",{"!border-b-2 -bottom-px left-1 right-0":v.value.type==="reorder-below","!border-t-2 -top-px left-1 right-0":v.value.type==="reorder-above","!border-2 rounded top-0 bottom-0 bg-primary/10 w-full -left-px":v.value.type==="make-child"}])},null,2)):ee("",!0),v.value&&(v.value.type==="reorder-below"||v.value.type==="reorder-above")?(W(),V("div",{key:1,class:N(["absolute pointer-events-none w-2 h-2 border-2 border-primary bg-transparent rounded-full -left-1 z-10 transition-all duration-150 ease-out",{"-bottom-1":v.value.type==="reorder-below","-top-1":v.value.type==="reorder-above"}])},null,2)):ee("",!0),v.value&&v.value.type==="make-child"?(W(),V("div",Yt," Drop to nest inside ")):ee("",!0),E("div",{ref_key:"dropZoneRef",ref:d,class:"relative w-full transition-all duration-200 ease-out"},[E("div",{ref_key:"draggableRef",ref:c,class:N(["relative w-full py-4 transition-all duration-200 ease-out",{"is-being-dragged":f.value}])},[Z(h.$slots,"default")],2)],512)],34))}}),Bt={class:"flex items-center gap-2 w-full"},Ht={class:"drag-and-drop-handler bg-elevated rounded p-1 hover:bg-accented cursor-grab"},zt={class:"pointer-events-none absolute left-0 -top-2.5 text-highlighted text-xs font-medium px-1.5 transition-all peer-focus:-top-2.5 peer-focus:text-highlighted peer-focus:text-xs peer-focus:font-medium peer-placeholder-shown:text-sm peer-placeholder-shown:text-dimmed peer-placeholder-shown:top-1.5 peer-placeholder-shown:font-normal"},Vt={class:"inline-flex bg-default px-1"},Zt={class:"w-full"},qt={class:"inline-flex bg-default px-1"},Gt=ve({__name:"WizardTreeItem",props:{item:{},level:{},shouldBeDimmed:{type:Function},wasRecentlyMoved:{type:Function},isDescendantOf:{type:Function},onAddNext:{type:Function},onAddChild:{type:Function},onDelete:{type:Function}},setup(e){function n(t){t.stopPropagation(),t.stopImmediatePropagation()}return(t,r)=>{const l=Be,d=He,c=Ve,f=ze;return W(),Ye(Ut,{item:t.item,level:t.level,"has-children":!!(t.item.children&&t.item.children.length>0),"is-last":!1,"is-descendant-of":t.isDescendantOf,"on-delete":t.onDelete,class:N([{"opacity-30":t.shouldBeDimmed(t.item.value||""),"ring-2 ring-primary ring-offset-2 bg-primary/5":t.wasRecentlyMoved(t.item.value||"")},"transition-all duration-300 ease-out rounded-lg"])},{default:X(()=>[E("div",Bt,[E("div",Ht,[R(l,{name:"lucide:grip-vertical",class:"size-4 text-dimmed"})]),Z(t.$slots,"leading",{item:t.item}),E("div",null,[R(d,{modelValue:t.item.var.key,"onUpdate:modelValue":[r[0]||(r[0]=p=>t.item.var.key=p),r[1]||(r[1]=p=>{const v=p.replace(/[^a-zA-Z0-9\\-_]/g,"");t.item.var.key=v})],onKeydown:[q(n,["left"]),q(n,["right"])],placeholder:"",ui:{base:"peer"}},{default:X(()=>[E("label",zt,[E("span",Vt,ge(t.i18n.__("Name")),1)])]),_:1},8,["modelValue"])]),Z(t.$slots,"before-value",{item:t.item}),E("div",Zt,[R(d,{modelValue:t.item.var.value,"onUpdate:modelValue":[r[2]||(r[2]=p=>t.item.var.value=p),r[3]||(r[3]=p=>{t.item.var.value=p})],onKeydown:[q(n,["left"]),q(n,["right"])],placeholder:"",ui:{base:"peer",root:"block"}},Ue({default:X(()=>[E("label",{class:N(["pointer-events-none absolute left-0 -top-2.5 text-highlighted text-xs font-medium px-1.5 transition-all peer-focus:-top-2.5 peer-focus:text-highlighted peer-focus:text-xs peer-focus:font-medium peer-placeholder-shown:text-sm peer-placeholder-shown:text-dimmed peer-placeholder-shown:top-1.5 peer-placeholder-shown:font-normal",{"peer-placeholder-shown:ps-9 peer-focus:ps-1.5":t.$slots["value-leading"]}])},[E("span",qt,ge(t.i18n.__("Value")),1)],2)]),_:2},[t.$slots["value-leading"]?{name:"leading",fn:X(()=>[Z(t.$slots,"value-leading",{item:t.item})]),key:"0"}:void 0]),1032,["modelValue"])]),E("div",null,[R(f,{items:[{label:t.i18n.__("Add (next)","windpress"),icon:"i-lucide-plus",onSelect(){t.onAddNext(t.item.value||"")}},{label:t.i18n.__("Add (child)","windpress"),icon:"lucide:corner-down-right",onSelect(){t.onAddChild(t.item.value||"")}},...t.onDelete?[{label:"Delete",icon:"i-lucide-trash-2",onSelect(){t.onDelete(t.item.value||"")}}]:[]],ui:{content:"w-48"}},{default:X(()=>[R(c,{icon:"lucide:ellipsis",color:"neutral",variant:"ghost"})]),_:1},8,["items"])])])]),_:3},8,["item","level","has-children","is-descendant-of","on-delete","class"])}}});export{Gt as _,Rt as a,Ze as u};
