import{l as q}from"../../../../design-system-BcwYkYVv.js";import{d as B}from"../../../../vfs-D2UpcTQ4.js";import{c as E,s as F,a as I}from"../../../../intellisense-C4SCibOB.js";import{F as W}from"../../../../fuse-Ch1WBRTM.min.js";import{p as D,w as b}from"../../../../index-Dfl2EUB3.min.js";import{s as w}from"../../../../set-Dt5k9sTt.min.js";import"../../../../index-Cpd--BI3.min.js";import"../../../../chunk-HTB5LLOP-Cay67bh1.min.js";import"../../../../index-C5HG4pYD.min.js";import"../../../../index-BAMY2Nnw.min.js";import"../../../../cssesc-oI9k1TGw.js";import"../../../../preload-helper-CsYsLKPR.min.js";import"../../../../source-map-generator-DjbDy59a.min.js";import"../../../../index-CgqXENQe.min.js";import"../../../../pre-process-BSusP0Xd.js";import"../../../../index-BkiRcEwW.min.js";import"../../../../_toKey-BxB36GnB.min.js";import"../../../../isObject-K1YoVIH1.min.js";async function L(e,r){let o=r.split(/\s+/).filter(l=>l!==""&&l!=="|"),t=await E(e,o);return Array.isArray(t)?t.join(" "):t}async function T(e,r){let o=r.split(/\s+/).filter(t=>t!==""&&t!=="|");return(await F(e,o)).join(" ")}let p=[],N=0;function S(e){var r;return((r=e==null?void 0:e.find(o=>o.property.includes("color")))==null?void 0:r.value)||null}function x(e){const r=new Set,o=t=>t.replace(/\\([0-9a-fA-F]{1,6}) ?/g,(l,c)=>String.fromCodePoint(parseInt(c,16))).replace(/\\([^\s])/g,"$1");for(const t of Object.keys(e))if(t.endsWith(".css")){const l=D(e[t]);b(l,{visit:"Selector",enter(c){b(c,{visit:"ClassSelector",enter(d){r.add(o(d.name))}})}})}return Array.from(r).map(t=>({kind:"user",selector:t}))}function O(e,r,o,t=0){let l=!1;if(t>N&&(N=t,l=!0),(p.length===0||l)&&(p=[...I(r),...x(e)]),o==="")return p.map(s=>({value:s.selector,color:S(s.declarations)}));let c=o.split(":"),d=c.slice(0,-1).join(":"),i=c.pop()||"",g="";i.startsWith("!")&&(i=i.slice(1),g="!");let n=!1;if(i.includes("/")){let[s,a]=i.split("/");a===""?(i=s,n=a):isNaN(Number(a))||Number(a)<0||Number(a)>100?i=[s,a].join("/"):(i=s,n=parseInt(a.toString()))}let u=p.filter(s=>s.selector.includes(i));if(n!==!1){let s=[];const a=n===""?5:1,C=n===""||Number(n)>9?0:Math.floor((Number(n)*10+1)/10)*10,M=n===""||Number(n)>9?100:Math.ceil((Number(n)*10+1)/10)*10;u.forEach(v=>{for(let f=C;f<=M;f+=a)s.push({...v,selector:v.selector+"/"+f})}),u=s}return new W(u,{keys:["selector"],threshold:.4}).search(i).map(({item:s})=>({value:[d,(g?"!":"")+s.selector].filter(Boolean).join(":"),color:S(s.declarations)}))}const j=new BroadcastChannel("windpress"),y=document.querySelector('script#windpress\\:vfs[type="text/plain"]');let m,h,k=0;async function A(){h=B((y==null?void 0:y.textContent)||"e30="),m=await q({volume:h}),k=Date.now(),j.postMessage({source:"windpress/intellisense",target:"any",task:"windpress.code-editor.saved.done"})}A(),j.addEventListener("message",async e=>{const r=e.data;r.source==="windpress/dashboard"&&r.target==="windpress/intellisense"&&r.task==="windpress.code-editor.saved"&&A()}),w(window,"windpress.module.autocomplete.query",e=>O(h,m,e,k)),w(window,"windpress.module.classnameToCss.generate",async e=>L(m,e)),w(window,"windpress.module.classSorter.sort",async e=>T(m,e));
