import{_ as mn}from"./preload-helper-CsYsLKPR.min.js";import{e as Lo}from"./index-C5HG4pYD.min.js";import{a8 as yn,V as bn,aC as vn,af as Fo,ae as Jt,aF as wn,Q as Po,ab as Do,ac as Jo,w as Uo,n as Ko,ag as Wo,a6 as Ro,a5 as qo,ad as Vo}from"./runtime-core.esm-bundler-HqF9pg4M.min.js";import{n as Sn}from"./index.browser-B0na17u1.min.js";import{u as Yo}from"./index-l5GBeiGs.min.js";import{a as Qo}from"./redaxios.module-D8m3meIN.min.js";import{l as On}from"./index-BQgNu2nd.min.js";import{g as Go}from"./get-DBhW7rda.min.js";let be,$n,Ut,ve,An,Nn,Kt,zo=(async()=>{let we;const vt=t=>we=t,Se=Symbol();function Wt(t){return t&&typeof t=="object"&&Object.prototype.toString.call(t)==="[object Object]"&&typeof t.toJSON!="function"}var at;(function(t){t.direct="direct",t.patchObject="patch object",t.patchFunction="patch function"})(at||(at={})),$n=function(){const t=yn(!0),e=t.run(()=>bn({}));let n=[],o=[];const r=vn({install(s){vt(r),r._a=s,s.provide(Se,r),s.config.globalProperties.$pinia=r,o.forEach(i=>n.push(i)),o=[]},use(s){return this._a?n.push(s):o.push(s),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return r};const Oe=()=>{};function $e(t,e,n,o=Oe){t.push(e);const r=()=>{const s=t.indexOf(e);s>-1&&(t.splice(s,1),o())};return!n&&Do()&&Jo(r),r}function Q(t,...e){t.slice().forEach(n=>{n(...e)})}const kn=t=>t(),Ae=Symbol(),Rt=Symbol();function qt(t,e){t instanceof Map&&e instanceof Map?e.forEach((n,o)=>t.set(o,n)):t instanceof Set&&e instanceof Set&&e.forEach(t.add,t);for(const n in e){if(!e.hasOwnProperty(n))continue;const o=e[n],r=t[n];Wt(r)&&Wt(o)&&t.hasOwnProperty(n)&&!Jt(o)&&!wn(o)?t[n]=qt(r,o):t[n]=o}return t}const En=Symbol();function jn(t){return!Wt(t)||!Object.prototype.hasOwnProperty.call(t,En)}const{assign:J}=Object;function Cn(t){return!!(Jt(t)&&t.effect)}function In(t,e,n,o){const{state:r,actions:s,getters:i}=e,c=n.state.value[t];let a;function u(){c||(n.state.value[t]=r?r():{});const m=Wo(n.state.value[t]);return J(m,s,Object.keys(i||{}).reduce((h,p)=>(h[p]=vn(Ro(()=>{vt(n);const l=n._s.get(t);return i[p].call(l,l)})),h),{}))}return a=Ne(t,u,e,n,o,!0),a}function Ne(t,e,n={},o,r,s){let i;const c=J({actions:{}},n),a={deep:!0};let u,m,h=[],p=[],l;const f=o.state.value[t];!s&&!f&&(o.state.value[t]={}),bn({});let g;function d(S){let A;u=m=!1,typeof S=="function"?(S(o.state.value[t]),A={type:at.patchFunction,storeId:t,events:l}):(qt(o.state.value[t],S),A={type:at.patchObject,payload:S,storeId:t,events:l});const I=g=Symbol();Ko().then(()=>{g===I&&(u=!0)}),m=!0,Q(h,A,o.state.value[t])}const b=s?function(){const{state:S}=n,A=S?S():{};this.$patch(I=>{J(I,A)})}:Oe;function y(){i.stop(),h=[],p=[],o._s.delete(t)}const v=(S,A="")=>{if(Ae in S)return S[Rt]=A,S;const I=function(){vt(o);const it=Array.from(arguments),W=[],F=[];function To(B){W.push(B)}function Bo(B){F.push(B)}Q(p,{args:it,name:I[Rt],store:O,after:To,onError:Bo});let bt;try{bt=S.apply(this&&this.$id===t?this:O,it)}catch(B){throw Q(F,B),B}return bt instanceof Promise?bt.then(B=>(Q(W,B),B)).catch(B=>(Q(F,B),Promise.reject(B))):(Q(W,bt),bt)};return I[Ae]=!0,I[Rt]=A,I},w={_p:o,$id:t,$onAction:$e.bind(null,p),$patch:d,$reset:b,$subscribe(S,A={}){const I=$e(h,S,A.detached,()=>it()),it=i.run(()=>Uo(()=>o.state.value[t],W=>{(A.flush==="sync"?m:u)&&S({storeId:t,type:at.direct,events:l},W)},J({},a,A)));return I},$dispose:y},O=Fo(w);o._s.set(t,O);const k=(o._a&&o._a.runWithContext||kn)(()=>o._e.run(()=>(i=yn()).run(()=>e({action:v}))));for(const S in k){const A=k[S];if(Jt(A)&&!Cn(A)||wn(A))s||(f&&jn(A)&&(Jt(A)?A.value=f[S]:qt(A,f[S])),o.state.value[t][S]=A);else if(typeof A=="function"){const I=v(A,S);k[S]=I,c.actions[S]=A}}return J(O,k),J(Po(O),k),Object.defineProperty(O,"$state",{get:()=>o.state.value[t],set:S=>{d(A=>{J(A,S)})}}),o._p.forEach(S=>{J(O,i.run(()=>S({store:O,app:o._a,pinia:o,options:c})))}),f&&s&&n.hydrate&&n.hydrate(O.$state,f),u=!0,m=!0,O}ve=function(t,e,n){let o;const r=typeof e=="function";o=r?n:e;function s(i,c){const a=Vo();return i=i||(a?qo(Se,null):null),i&&vt(i),i=we,i._s.has(t)||(r?Ne(t,e,o,i):In(t,o,i)),i._s.get(t)}return s.$id=t,s};let Vt;be=function(t={}){return Vt||(Vt=Qo.create(Object.assign({baseURL:window.windpress.rest_api.url||"",headers:{"content-type":"application/json",accept:"application/json","X-WP-Nonce":window.windpress.rest_api.nonce||""}},t))),Vt},Ut=function(){const t={id:"JqhEkI6VK0",timestamp:1742407548572,type:"debug",message:'Thank you for using WindPress! Join us on the Facebook Group: <a href="https://wind.press/go/facebook" target="_blank" class="underline">https://wind.press/go/facebook</a>',options:{raw:!0}},e=Yo("windpress.dashboard.store.logs",[t]);function n(i){const c=Sn(10);return e.value.push({id:c,timestamp:Date.now(),...i}),c}function o(i,c){const a=e.value.find(u=>u.id===i);a&&Object.assign(a,c)}function r(i,c="id"){switch(c){case"message":e.value=e.value.filter(a=>!a.message.includes(i));break;case"type":e.value=e.value.filter(a=>a.type!==i);break;case"group":e.value=e.value.filter(a=>a.group!==i);break;case"id":default:e.value=e.value.filter(a=>a.id!==i);break}}function s(){e.value=[],e.value.push(t)}return{logs:e,add:n,update:o,remove:r,clear:s}};let Yt,ke,Ee;Nn=ve("log",()=>({...Ut()})),Yt=[["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]],ke=Object.fromEntries([...Yt.map(([t,e])=>[e,t]),["&apos;","'"],["&nbsp;","\xA0"]]),Ee=new Map(Yt),new RegExp(`[${[...Ee.keys()].join("")}]`,"g");const xn={entityList:ke},_n=1114111,Mn=/&#([0-9]+);/g,Tn=new RegExp("&#x(\\p{AHex}+);","gu"),je=new WeakMap;function Bn(t,e={}){const{entityList:n}={...xn,...e};let o=je.get(n);return o||(o=new RegExp(`(${Object.keys(n).sort((r,s)=>s.length-r.length).join("|")})`,"g"),je.set(n,o)),t.replaceAll(o,r=>n[r]).replaceAll(Mn,(r,s)=>Ce(s,10)).replaceAll(Tn,(r,s)=>Ce(s,16))}function Ce(t,e){const n=parseInt(t,e);return n>_n?"\uFFFD":String.fromCodePoint(n)}const Qt=Symbol.for("yaml.alias"),Gt=Symbol.for("yaml.document"),U=Symbol.for("yaml.map"),Ie=Symbol.for("yaml.pair"),wt=Symbol.for("yaml.scalar"),G=Symbol.for("yaml.seq"),_=Symbol.for("yaml.node.type"),R=t=>!!t&&typeof t=="object"&&t[_]===Qt,lt=t=>!!t&&typeof t=="object"&&t[_]===Gt,ct=t=>!!t&&typeof t=="object"&&t[_]===U,C=t=>!!t&&typeof t=="object"&&t[_]===Ie,N=t=>!!t&&typeof t=="object"&&t[_]===wt,ut=t=>!!t&&typeof t=="object"&&t[_]===G;function E(t){if(t&&typeof t=="object")switch(t[_]){case U:case G:return!0}return!1}function j(t){if(t&&typeof t=="object")switch(t[_]){case Qt:case U:case wt:case G:return!0}return!1}const xe=t=>(N(t)||E(t))&&!!t.anchor,q=Symbol("break visit"),Ln=Symbol("skip children"),ft=Symbol("remove node");function z(t,e){const n=Fn(e);lt(t)?X(null,t.contents,n,Object.freeze([t]))===ft&&(t.contents=null):X(null,t,n,Object.freeze([]))}z.BREAK=q,z.SKIP=Ln,z.REMOVE=ft;function X(t,e,n,o){const r=Pn(t,e,n,o);if(j(r)||C(r))return Dn(t,o,r),X(t,r,n,o);if(typeof r!="symbol"){if(E(e)){o=Object.freeze(o.concat(e));for(let s=0;s<e.items.length;++s){const i=X(s,e.items[s],n,o);if(typeof i=="number")s=i-1;else{if(i===q)return q;i===ft&&(e.items.splice(s,1),s-=1)}}}else if(C(e)){o=Object.freeze(o.concat(e));const s=X("key",e.key,n,o);if(s===q)return q;s===ft&&(e.key=null);const i=X("value",e.value,n,o);if(i===q)return q;i===ft&&(e.value=null)}}return r}function Fn(t){return typeof t=="object"&&(t.Collection||t.Node||t.Value)?Object.assign({Alias:t.Node,Map:t.Node,Scalar:t.Node,Seq:t.Node},t.Value&&{Map:t.Value,Scalar:t.Value,Seq:t.Value},t.Collection&&{Map:t.Collection,Seq:t.Collection},t):t}function Pn(t,e,n,o){var r,s,i,c,a;if(typeof n=="function")return n(t,e,o);if(ct(e))return(r=n.Map)==null?void 0:r.call(n,t,e,o);if(ut(e))return(s=n.Seq)==null?void 0:s.call(n,t,e,o);if(C(e))return(i=n.Pair)==null?void 0:i.call(n,t,e,o);if(N(e))return(c=n.Scalar)==null?void 0:c.call(n,t,e,o);if(R(e))return(a=n.Alias)==null?void 0:a.call(n,t,e,o)}function Dn(t,e,n){const o=e[e.length-1];if(E(o))o.items[t]=n;else if(C(o))t==="key"?o.key=n:o.value=n;else if(lt(o))o.contents=n;else{const r=R(o)?"alias":"scalar";throw new Error(`Cannot replace node with ${r} parent`)}}const Jn={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},Un=t=>t.replace(/[!,[\]{}]/g,e=>Jn[e]);class x{constructor(e,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},x.defaultYaml,e),this.tags=Object.assign({},x.defaultTags,n)}clone(){const e=new x(this.yaml,this.tags);return e.docStart=this.docStart,e}atDocument(){const e=new x(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:x.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},x.defaultTags);break}return e}add(e,n){this.atNextDocument&&(this.yaml={explicit:x.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},x.defaultTags),this.atNextDocument=!1);const o=e.trim().split(/[ \t]+/),r=o.shift();switch(r){case"%TAG":{if(o.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),o.length<2))return!1;const[s,i]=o;return this.tags[s]=i,!0}case"%YAML":{if(this.yaml.explicit=!0,o.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;const[s]=o;if(s==="1.1"||s==="1.2")return this.yaml.version=s,!0;{const i=/^\d+\.\d+$/.test(s);return n(6,`Unsupported YAML version ${s}`,i),!1}}default:return n(0,`Unknown directive ${r}`,!0),!1}}tagName(e,n){if(e==="!")return"!";if(e[0]!=="!")return n(`Not a valid tag: ${e}`),null;if(e[1]==="<"){const i=e.slice(2,-1);return i==="!"||i==="!!"?(n(`Verbatim tags aren't resolved, so ${e} is invalid.`),null):(e[e.length-1]!==">"&&n("Verbatim tags must end with a >"),i)}const[,o,r]=e.match(/^(.*!)([^!]*)$/s);r||n(`The ${e} tag has no suffix`);const s=this.tags[o];if(s)try{return s+decodeURIComponent(r)}catch(i){return n(String(i)),null}return o==="!"?e:(n(`Could not resolve tag: ${e}`),null)}tagString(e){for(const[n,o]of Object.entries(this.tags))if(e.startsWith(o))return n+Un(e.substring(o.length));return e[0]==="!"?e:`!<${e}>`}toString(e){const n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],o=Object.entries(this.tags);let r;if(e&&o.length>0&&j(e.contents)){const s={};z(e.contents,(i,c)=>{j(c)&&c.tag&&(s[c.tag]=!0)}),r=Object.keys(s)}else r=[];for(const[s,i]of o)s==="!!"&&i==="tag:yaml.org,2002:"||(!e||r.some(c=>c.startsWith(i)))&&n.push(`%TAG ${s} ${i}`);return n.join(`
`)}}x.defaultYaml={explicit:!1,version:"1.2"},x.defaultTags={"!!":"tag:yaml.org,2002:"};function _e(t){if(/[\x00-\x19\s,[\]{}]/.test(t)){const e=`Anchor must not contain whitespace or control characters: ${JSON.stringify(t)}`;throw new Error(e)}return!0}function Me(t){const e=new Set;return z(t,{Value(n,o){o.anchor&&e.add(o.anchor)}}),e}function Te(t,e){for(let n=1;;++n){const o=`${t}${n}`;if(!e.has(o))return o}}function Kn(t,e){const n=[],o=new Map;let r=null;return{onAnchor:s=>{n.push(s),r??(r=Me(t));const i=Te(e,r);return r.add(i),i},setAnchors:()=>{for(const s of n){const i=o.get(s);if(typeof i=="object"&&i.anchor&&(N(i.node)||E(i.node)))i.node.anchor=i.anchor;else{const c=new Error("Failed to resolve repeated object (this should not happen)");throw c.source=s,c}}},sourceObjects:o}}function H(t,e,n,o){if(o&&typeof o=="object")if(Array.isArray(o))for(let r=0,s=o.length;r<s;++r){const i=o[r],c=H(t,o,String(r),i);c===void 0?delete o[r]:c!==i&&(o[r]=c)}else if(o instanceof Map)for(const r of Array.from(o.keys())){const s=o.get(r),i=H(t,o,r,s);i===void 0?o.delete(r):i!==s&&o.set(r,i)}else if(o instanceof Set)for(const r of Array.from(o)){const s=H(t,o,r,r);s===void 0?o.delete(r):s!==r&&(o.delete(r),o.add(s))}else for(const[r,s]of Object.entries(o)){const i=H(t,o,r,s);i===void 0?delete o[r]:i!==s&&(o[r]=i)}return t.call(e,n,o)}function M(t,e,n){if(Array.isArray(t))return t.map((o,r)=>M(o,String(r),n));if(t&&typeof t.toJSON=="function"){if(!n||!xe(t))return t.toJSON(e,n);const o={aliasCount:0,count:1,res:void 0};n.anchors.set(t,o),n.onCreate=s=>{o.res=s,delete n.onCreate};const r=t.toJSON(e,n);return n.onCreate&&n.onCreate(r),r}return typeof t=="bigint"&&!(n!=null&&n.keep)?Number(t):t}class zt{constructor(e){Object.defineProperty(this,_,{value:e})}clone(){const e=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(e.range=this.range.slice()),e}toJS(e,{mapAsMap:n,maxAliasCount:o,onAnchor:r,reviver:s}={}){if(!lt(e))throw new TypeError("A document argument is required");const i={anchors:new Map,doc:e,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof o=="number"?o:100},c=M(this,"",i);if(typeof r=="function")for(const{count:a,res:u}of i.anchors.values())r(u,a);return typeof s=="function"?H(s,{"":c},"",c):c}}class Be extends zt{constructor(e){super(Qt),this.source=e,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(e,n){let o;n!=null&&n.aliasResolveCache?o=n.aliasResolveCache:(o=[],z(e,{Node:(s,i)=>{(R(i)||xe(i))&&o.push(i)}}),n&&(n.aliasResolveCache=o));let r;for(const s of o){if(s===this)break;s.anchor===this.source&&(r=s)}return r}toJSON(e,n){if(!n)return{source:this.source};const{anchors:o,doc:r,maxAliasCount:s}=n,i=this.resolve(r,n);if(!i){const a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(a)}let c=o.get(i);if(c||(M(i,null,n),c=o.get(i)),!c||c.res===void 0){const a="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(a)}if(s>=0&&(c.count+=1,c.aliasCount===0&&(c.aliasCount=St(r,i,o)),c.count*c.aliasCount>s)){const a="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(a)}return c.res}toString(e,n,o){const r=`*${this.source}`;if(e){if(_e(this.source),e.options.verifyAliasOrder&&!e.anchors.has(this.source)){const s=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(s)}if(e.implicitKey)return`${r} `}return r}}function St(t,e,n){if(R(e)){const o=e.resolve(t),r=n&&o&&n.get(o);return r?r.count*r.aliasCount:0}else if(E(e)){let o=0;for(const r of e.items){const s=St(t,r,n);s>o&&(o=s)}return o}else if(C(e)){const o=St(t,e.key,n),r=St(t,e.value,n);return Math.max(o,r)}return 1}const Le=t=>!t||typeof t!="function"&&typeof t!="object";class $ extends zt{constructor(e){super(wt),this.value=e}toJSON(e,n){return n!=null&&n.keep?this.value:M(this.value,e,n)}toString(){return String(this.value)}}$.BLOCK_FOLDED="BLOCK_FOLDED",$.BLOCK_LITERAL="BLOCK_LITERAL",$.PLAIN="PLAIN",$.QUOTE_DOUBLE="QUOTE_DOUBLE",$.QUOTE_SINGLE="QUOTE_SINGLE";const Wn="tag:yaml.org,2002:";function Rn(t,e,n){if(e){const o=n.filter(s=>s.tag===e),r=o.find(s=>!s.format)??o[0];if(!r)throw new Error(`Tag ${e} not found`);return r}return n.find(o=>{var r;return((r=o.identify)==null?void 0:r.call(o,t))&&!o.format})}function ht(t,e,n){var h,p,l;if(lt(t)&&(t=t.contents),j(t))return t;if(C(t)){const f=(p=(h=n.schema[U]).createNode)==null?void 0:p.call(h,n.schema,null,n);return f.items.push(t),f}(t instanceof String||t instanceof Number||t instanceof Boolean||typeof BigInt<"u"&&t instanceof BigInt)&&(t=t.valueOf());const{aliasDuplicateObjects:o,onAnchor:r,onTagObj:s,schema:i,sourceObjects:c}=n;let a;if(o&&t&&typeof t=="object"){if(a=c.get(t),a)return a.anchor??(a.anchor=r(t)),new Be(a.anchor);a={anchor:null,node:null},c.set(t,a)}e!=null&&e.startsWith("!!")&&(e=Wn+e.slice(2));let u=Rn(t,e,i.tags);if(!u){if(t&&typeof t.toJSON=="function"&&(t=t.toJSON()),!t||typeof t!="object"){const f=new $(t);return a&&(a.node=f),f}u=t instanceof Map?i[U]:Symbol.iterator in Object(t)?i[G]:i[U]}s&&(s(u),delete n.onTagObj);const m=u!=null&&u.createNode?u.createNode(n.schema,t,n):typeof((l=u==null?void 0:u.nodeClass)==null?void 0:l.from)=="function"?u.nodeClass.from(n.schema,t,n):new $(t);return e?m.tag=e:u.default||(m.tag=u.tag),a&&(a.node=m),m}function Ot(t,e,n){let o=n;for(let r=e.length-1;r>=0;--r){const s=e[r];if(typeof s=="number"&&Number.isInteger(s)&&s>=0){const i=[];i[s]=o,o=i}else o=new Map([[s,o]])}return ht(o,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:t,sourceObjects:new Map})}const dt=t=>t==null||typeof t=="object"&&!!t[Symbol.iterator]().next().done;class Fe extends zt{constructor(e,n){super(e),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(e){const n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return e&&(n.schema=e),n.items=n.items.map(o=>j(o)||C(o)?o.clone(e):o),this.range&&(n.range=this.range.slice()),n}addIn(e,n){if(dt(e))this.add(n);else{const[o,...r]=e,s=this.get(o,!0);if(E(s))s.addIn(r,n);else if(s===void 0&&this.schema)this.set(o,Ot(this.schema,r,n));else throw new Error(`Expected YAML collection at ${o}. Remaining path: ${r}`)}}deleteIn(e){const[n,...o]=e;if(o.length===0)return this.delete(n);const r=this.get(n,!0);if(E(r))return r.deleteIn(o);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${o}`)}getIn(e,n){const[o,...r]=e,s=this.get(o,!0);return r.length===0?!n&&N(s)?s.value:s:E(s)?s.getIn(r,n):void 0}hasAllNullValues(e){return this.items.every(n=>{if(!C(n))return!1;const o=n.value;return o==null||e&&N(o)&&o.value==null&&!o.commentBefore&&!o.comment&&!o.tag})}hasIn(e){const[n,...o]=e;if(o.length===0)return this.has(n);const r=this.get(n,!0);return E(r)?r.hasIn(o):!1}setIn(e,n){const[o,...r]=e;if(r.length===0)this.set(o,n);else{const s=this.get(o,!0);if(E(s))s.setIn(r,n);else if(s===void 0&&this.schema)this.set(o,Ot(this.schema,r,n));else throw new Error(`Expected YAML collection at ${o}. Remaining path: ${r}`)}}}const qn=t=>t.replace(/^(?!$)(?: $)?/gm,"#");function P(t,e){return/^\n+$/.test(t)?t.substring(1):e?t.replace(/^(?! *$)/gm,e):t}const V=(t,e,n)=>t.endsWith(`
`)?P(n,e):n.includes(`
`)?`
`+P(n,e):(t.endsWith(" ")?"":" ")+n,Pe="flow",Xt="block",$t="quoted";function At(t,e,n="flow",{indentAtStart:o,lineWidth:r=80,minContentWidth:s=20,onFold:i,onOverflow:c}={}){if(!r||r<0)return t;r<s&&(s=0);const a=Math.max(1+s,1+r-e.length);if(t.length<=a)return t;const u=[],m={};let h=r-e.length;typeof o=="number"&&(o>r-Math.max(2,s)?u.push(0):h=r-o);let p,l,f=!1,g=-1,d=-1,b=-1;n===Xt&&(g=De(t,g,e.length),g!==-1&&(h=g+a));for(let v;v=t[g+=1];){if(n===$t&&v==="\\"){switch(d=g,t[g+1]){case"x":g+=3;break;case"u":g+=5;break;case"U":g+=9;break;default:g+=1}b=g}if(v===`
`)n===Xt&&(g=De(t,g,e.length)),h=g+e.length+a,p=void 0;else{if(v===" "&&l&&l!==" "&&l!==`
`&&l!=="	"){const w=t[g+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(p=g)}if(g>=h)if(p)u.push(p),h=p+a,p=void 0;else if(n===$t){for(;l===" "||l==="	";)l=v,v=t[g+=1],f=!0;const w=g>b+1?g-2:d-1;if(m[w])return t;u.push(w),m[w]=!0,h=w+a,p=void 0}else f=!0}l=v}if(f&&c&&c(),u.length===0)return t;i&&i();let y=t.slice(0,u[0]);for(let v=0;v<u.length;++v){const w=u[v],O=u[v+1]||t.length;w===0?y=`
${e}${t.slice(0,O)}`:(n===$t&&m[w]&&(y+=`${t[w]}\\`),y+=`
${e}${t.slice(w+1,O)}`)}return y}function De(t,e,n){let o=e,r=e+1,s=t[r];for(;s===" "||s==="	";)if(e<r+n)s=t[++e];else{do s=t[++e];while(s&&s!==`
`);o=e,r=e+1,s=t[r]}return o}const Nt=(t,e)=>({indentAtStart:e?t.indent.length:t.indentAtStart,lineWidth:t.options.lineWidth,minContentWidth:t.options.minContentWidth}),kt=t=>/^(%|---|\.\.\.)/m.test(t);function Vn(t,e,n){if(!e||e<0)return!1;const o=e-n,r=t.length;if(r<=o)return!1;for(let s=0,i=0;s<r;++s)if(t[s]===`
`){if(s-i>o)return!0;if(i=s+1,r-i<=o)return!1}return!0}function pt(t,e){const n=JSON.stringify(t);if(e.options.doubleQuotedAsJSON)return n;const{implicitKey:o}=e,r=e.options.doubleQuotedMinMultiLineLength,s=e.indent||(kt(t)?"  ":"");let i="",c=0;for(let a=0,u=n[a];u;u=n[++a])if(u===" "&&n[a+1]==="\\"&&n[a+2]==="n"&&(i+=n.slice(c,a)+"\\ ",a+=1,c=a,u="\\"),u==="\\")switch(n[a+1]){case"u":{i+=n.slice(c,a);const m=n.substr(a+2,4);switch(m){case"0000":i+="\\0";break;case"0007":i+="\\a";break;case"000b":i+="\\v";break;case"001b":i+="\\e";break;case"0085":i+="\\N";break;case"00a0":i+="\\_";break;case"2028":i+="\\L";break;case"2029":i+="\\P";break;default:m.substr(0,2)==="00"?i+="\\x"+m.substr(2):i+=n.substr(a,6)}a+=5,c=a+1}break;case"n":if(o||n[a+2]==='"'||n.length<r)a+=1;else{for(i+=n.slice(c,a)+`

`;n[a+2]==="\\"&&n[a+3]==="n"&&n[a+4]!=='"';)i+=`
`,a+=2;i+=s,n[a+2]===" "&&(i+="\\"),a+=1,c=a+1}break;default:a+=1}return i=c?i+n.slice(c):n,o?i:At(i,s,$t,Nt(e,!1))}function Ht(t,e){if(e.options.singleQuote===!1||e.implicitKey&&t.includes(`
`)||/[ \t]\n|\n[ \t]/.test(t))return pt(t,e);const n=e.indent||(kt(t)?"  ":""),o="'"+t.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return e.implicitKey?o:At(o,n,Pe,Nt(e,!1))}function Z(t,e){const{singleQuote:n}=e.options;let o;if(n===!1)o=pt;else{const r=t.includes('"'),s=t.includes("'");r&&!s?o=Ht:s&&!r?o=pt:o=n?Ht:pt}return o(t,e)}let Zt;try{Zt=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch{Zt=/\n+(?!\n|$)/g}function Et({comment:t,type:e,value:n},o,r,s){const{blockQuote:i,commentString:c,lineWidth:a}=o.options;if(!i||/\n[\t ]+$/.test(n)||/^\s*$/.test(n))return Z(n,o);const u=o.indent||(o.forceBlockIndent||kt(n)?"  ":""),m=i==="literal"?!0:i==="folded"||e===$.BLOCK_FOLDED?!1:e===$.BLOCK_LITERAL?!0:!Vn(n,a,u.length);if(!n)return m?`|
`:`>
`;let h,p;for(p=n.length;p>0;--p){const w=n[p-1];if(w!==`
`&&w!=="	"&&w!==" ")break}let l=n.substring(p);const f=l.indexOf(`
`);f===-1?h="-":n===l||f!==l.length-1?(h="+",s&&s()):h="",l&&(n=n.slice(0,-l.length),l[l.length-1]===`
`&&(l=l.slice(0,-1)),l=l.replace(Zt,`$&${u}`));let g=!1,d,b=-1;for(d=0;d<n.length;++d){const w=n[d];if(w===" ")g=!0;else if(w===`
`)b=d;else break}let y=n.substring(0,b<d?b+1:d);y&&(n=n.substring(y.length),y=y.replace(/\n+/g,`$&${u}`));let v=(g?u?"2":"1":"")+h;if(t&&(v+=" "+c(t.replace(/ ?[\r\n]+/g," ")),r&&r()),!m){const w=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${u}`);let O=!1;const k=Nt(o,!0);i!=="folded"&&e!==$.BLOCK_FOLDED&&(k.onOverflow=()=>{O=!0});const S=At(`${y}${w}${l}`,u,Xt,k);if(!O)return`>${v}
${u}${S}`}return n=n.replace(/\n+/g,`$&${u}`),`|${v}
${u}${y}${n}${l}`}function Yn(t,e,n,o){const{type:r,value:s}=t,{actualString:i,implicitKey:c,indent:a,indentStep:u,inFlow:m}=e;if(c&&s.includes(`
`)||m&&/[[\]{},]/.test(s))return Z(s,e);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(s))return c||m||!s.includes(`
`)?Z(s,e):Et(t,e,n,o);if(!c&&!m&&r!==$.PLAIN&&s.includes(`
`))return Et(t,e,n,o);if(kt(s)){if(a==="")return e.forceBlockIndent=!0,Et(t,e,n,o);if(c&&a===u)return Z(s,e)}const h=s.replace(/\n+/g,`$&
${a}`);if(i){const p=g=>{var d;return g.default&&g.tag!=="tag:yaml.org,2002:str"&&((d=g.test)==null?void 0:d.test(h))},{compat:l,tags:f}=e.doc.schema;if(f.some(p)||l!=null&&l.some(p))return Z(s,e)}return c?h:At(h,a,Pe,Nt(e,!1))}function te(t,e,n,o){const{implicitKey:r,inFlow:s}=e,i=typeof t.value=="string"?t:Object.assign({},t,{value:String(t.value)});let{type:c}=t;c!==$.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(i.value)&&(c=$.QUOTE_DOUBLE);const a=m=>{switch(m){case $.BLOCK_FOLDED:case $.BLOCK_LITERAL:return r||s?Z(i.value,e):Et(i,e,n,o);case $.QUOTE_DOUBLE:return pt(i.value,e);case $.QUOTE_SINGLE:return Ht(i.value,e);case $.PLAIN:return Yn(i,e,n,o);default:return null}};let u=a(c);if(u===null){const{defaultKeyType:m,defaultStringType:h}=e.options,p=r&&m||h;if(u=a(p),u===null)throw new Error(`Unsupported default string type ${p}`)}return u}function Je(t,e){const n=Object.assign({blockQuote:!0,commentString:qn,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},t.schema.toStringOptions,e);let o;switch(n.collectionStyle){case"block":o=!1;break;case"flow":o=!0;break;default:o=null}return{anchors:new Set,doc:t,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:o,options:n}}function Qn(t,e){var r;if(e.tag){const s=t.filter(i=>i.tag===e.tag);if(s.length>0)return s.find(i=>i.format===e.format)??s[0]}let n,o;if(N(e)){o=e.value;let s=t.filter(i=>{var c;return(c=i.identify)==null?void 0:c.call(i,o)});if(s.length>1){const i=s.filter(c=>c.test);i.length>0&&(s=i)}n=s.find(i=>i.format===e.format)??s.find(i=>!i.format)}else o=e,n=t.find(s=>s.nodeClass&&o instanceof s.nodeClass);if(!n){const s=((r=o==null?void 0:o.constructor)==null?void 0:r.name)??(o===null?"null":typeof o);throw new Error(`Tag not resolved for ${s} value`)}return n}function Gn(t,e,{anchors:n,doc:o}){if(!o.directives)return"";const r=[],s=(N(t)||E(t))&&t.anchor;s&&_e(s)&&(n.add(s),r.push(`&${s}`));const i=t.tag??(e.default?null:e.tag);return i&&r.push(o.directives.tagString(i)),r.join(" ")}function tt(t,e,n,o){var a;if(C(t))return t.toString(e,n,o);if(R(t)){if(e.doc.directives)return t.toString(e);if((a=e.resolvedAliases)!=null&&a.has(t))throw new TypeError("Cannot stringify circular structure without alias nodes");e.resolvedAliases?e.resolvedAliases.add(t):e.resolvedAliases=new Set([t]),t=t.resolve(e.doc)}let r;const s=j(t)?t:e.doc.createNode(t,{onTagObj:u=>r=u});r??(r=Qn(e.doc.schema.tags,s));const i=Gn(s,r,e);i.length>0&&(e.indentAtStart=(e.indentAtStart??0)+i.length+1);const c=typeof r.stringify=="function"?r.stringify(s,e,n,o):N(s)?te(s,e,n,o):s.toString(e,n,o);return i?N(s)||c[0]==="{"||c[0]==="["?`${i} ${c}`:`${i}
${e.indent}${c}`:c}function zn({key:t,value:e},n,o,r){const{allNullValues:s,doc:i,indent:c,indentStep:a,options:{commentString:u,indentSeq:m,simpleKeys:h}}=n;let p=j(t)&&t.comment||null;if(h){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(E(t)||!j(t)&&typeof t=="object"){const S="With simple keys, collection cannot be used as a key value";throw new Error(S)}}let l=!h&&(!t||p&&e==null&&!n.inFlow||E(t)||(N(t)?t.type===$.BLOCK_FOLDED||t.type===$.BLOCK_LITERAL:typeof t=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!l&&(h||!s),indent:c+a});let f=!1,g=!1,d=tt(t,n,()=>f=!0,()=>g=!0);if(!l&&!n.inFlow&&d.length>1024){if(h)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");l=!0}if(n.inFlow){if(s||e==null)return f&&o&&o(),d===""?"?":l?`? ${d}`:d}else if(s&&!h||e==null&&l)return d=`? ${d}`,p&&!f?d+=V(d,n.indent,u(p)):g&&r&&r(),d;f&&(p=null),l?(p&&(d+=V(d,n.indent,u(p))),d=`? ${d}
${c}:`):(d=`${d}:`,p&&(d+=V(d,n.indent,u(p))));let b,y,v;j(e)?(b=!!e.spaceBefore,y=e.commentBefore,v=e.comment):(b=!1,y=null,v=null,e&&typeof e=="object"&&(e=i.createNode(e))),n.implicitKey=!1,!l&&!p&&N(e)&&(n.indentAtStart=d.length+1),g=!1,!m&&a.length>=2&&!n.inFlow&&!l&&ut(e)&&!e.flow&&!e.tag&&!e.anchor&&(n.indent=n.indent.substring(2));let w=!1;const O=tt(e,n,()=>w=!0,()=>g=!0);let k=" ";if(p||b||y){if(k=b?`
`:"",y){const S=u(y);k+=`
${P(S,n.indent)}`}O===""&&!n.inFlow?k===`
`&&(k=`

`):k+=`
${n.indent}`}else if(!l&&E(e)){const S=O[0],A=O.indexOf(`
`),I=A!==-1,it=n.inFlow??e.flow??e.items.length===0;if(I||!it){let W=!1;if(I&&(S==="&"||S==="!")){let F=O.indexOf(" ");S==="&"&&F!==-1&&F<A&&O[F+1]==="!"&&(F=O.indexOf(" ",F+1)),(F===-1||A<F)&&(W=!0)}W||(k=`
${n.indent}`)}}else(O===""||O[0]===`
`)&&(k="");return d+=k+O,n.inFlow?w&&o&&o():v&&!w?d+=V(d,n.indent,u(v)):g&&r&&r(),d}function Xn(t,e){(t==="debug"||t==="warn")&&console.warn(e)}const jt="<<",D={identify:t=>t===jt||typeof t=="symbol"&&t.description===jt,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new $(Symbol(jt)),{addToJSMap:Ue}),stringify:()=>jt},Hn=(t,e)=>(D.identify(e)||N(e)&&(!e.type||e.type===$.PLAIN)&&D.identify(e.value))&&(t==null?void 0:t.doc.schema.tags.some(n=>n.tag===D.tag&&n.default));function Ue(t,e,n){if(n=t&&R(n)?n.resolve(t.doc):n,ut(n))for(const o of n.items)ee(t,e,o);else if(Array.isArray(n))for(const o of n)ee(t,e,o);else ee(t,e,n)}function ee(t,e,n){const o=t&&R(n)?n.resolve(t.doc):n;if(!ct(o))throw new Error("Merge sources must be maps or map aliases");const r=o.toJSON(null,t,Map);for(const[s,i]of r)e instanceof Map?e.has(s)||e.set(s,i):e instanceof Set?e.add(s):Object.prototype.hasOwnProperty.call(e,s)||Object.defineProperty(e,s,{value:i,writable:!0,enumerable:!0,configurable:!0});return e}function Ke(t,e,{key:n,value:o}){if(j(n)&&n.addToJSMap)n.addToJSMap(t,e,o);else if(Hn(t,n))Ue(t,e,o);else{const r=M(n,"",t);if(e instanceof Map)e.set(r,M(o,r,t));else if(e instanceof Set)e.add(r);else{const s=Zn(n,r,t),i=M(o,s,t);s in e?Object.defineProperty(e,s,{value:i,writable:!0,enumerable:!0,configurable:!0}):e[s]=i}}return e}function Zn(t,e,n){if(e===null)return"";if(typeof e!="object")return String(e);if(j(t)&&(n!=null&&n.doc)){const o=Je(n.doc,{});o.anchors=new Set;for(const s of n.anchors.keys())o.anchors.add(s.anchor);o.inFlow=!0,o.inStringifyKey=!0;const r=t.toString(o);if(!n.mapKeyWarned){let s=JSON.stringify(r);s.length>40&&(s=s.substring(0,36)+'..."'),Xn(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${s}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return r}return JSON.stringify(e)}function ne(t,e,n){const o=ht(t,void 0,n),r=ht(e,void 0,n);return new T(o,r)}class T{constructor(e,n=null){Object.defineProperty(this,_,{value:Ie}),this.key=e,this.value=n}clone(e){let{key:n,value:o}=this;return j(n)&&(n=n.clone(e)),j(o)&&(o=o.clone(e)),new T(n,o)}toJSON(e,n){const o=n!=null&&n.mapAsMap?new Map:{};return Ke(n,o,this)}toString(e,n,o){return e!=null&&e.doc?zn(this,e,n,o):JSON.stringify(this)}}function We(t,e,n){return(e.inFlow??t.flow?eo:to)(t,e,n)}function to({comment:t,items:e},n,{blockItemPrefix:o,flowChars:r,itemIndent:s,onChompKeep:i,onComment:c}){const{indent:a,options:{commentString:u}}=n,m=Object.assign({},n,{indent:s,type:null});let h=!1;const p=[];for(let f=0;f<e.length;++f){const g=e[f];let d=null;if(j(g))!h&&g.spaceBefore&&p.push(""),Ct(n,p,g.commentBefore,h),g.comment&&(d=g.comment);else if(C(g)){const y=j(g.key)?g.key:null;y&&(!h&&y.spaceBefore&&p.push(""),Ct(n,p,y.commentBefore,h))}h=!1;let b=tt(g,m,()=>d=null,()=>h=!0);d&&(b+=V(b,s,u(d))),h&&d&&(h=!1),p.push(o+b)}let l;if(p.length===0)l=r.start+r.end;else{l=p[0];for(let f=1;f<p.length;++f){const g=p[f];l+=g?`
${a}${g}`:`
`}}return t?(l+=`
`+P(u(t),a),c&&c()):h&&i&&i(),l}function eo({items:t},e,{flowChars:n,itemIndent:o}){const{indent:r,indentStep:s,flowCollectionPadding:i,options:{commentString:c}}=e;o+=s;const a=Object.assign({},e,{indent:o,inFlow:!0,type:null});let u=!1,m=0;const h=[];for(let f=0;f<t.length;++f){const g=t[f];let d=null;if(j(g))g.spaceBefore&&h.push(""),Ct(e,h,g.commentBefore,!1),g.comment&&(d=g.comment);else if(C(g)){const y=j(g.key)?g.key:null;y&&(y.spaceBefore&&h.push(""),Ct(e,h,y.commentBefore,!1),y.comment&&(u=!0));const v=j(g.value)?g.value:null;v?(v.comment&&(d=v.comment),v.commentBefore&&(u=!0)):g.value==null&&(y!=null&&y.comment)&&(d=y.comment)}d&&(u=!0);let b=tt(g,a,()=>d=null);f<t.length-1&&(b+=","),d&&(b+=V(b,o,c(d))),!u&&(h.length>m||b.includes(`
`))&&(u=!0),h.push(b),m=h.length}const{start:p,end:l}=n;if(h.length===0)return p+l;if(!u){const f=h.reduce((g,d)=>g+d.length+2,2);u=e.options.lineWidth>0&&f>e.options.lineWidth}if(u){let f=p;for(const g of h)f+=g?`
${s}${r}${g}`:`
`;return`${f}
${r}${l}`}else return`${p}${i}${h.join(" ")}${i}${l}`}function Ct({indent:t,options:{commentString:e}},n,o,r){if(o&&r&&(o=o.replace(/^\n+/,"")),o){const s=P(e(o),t);n.push(s.trimStart())}}function Y(t,e){const n=N(e)?e.value:e;for(const o of t)if(C(o)&&(o.key===e||o.key===n||N(o.key)&&o.key.value===n))return o}class K extends Fe{static get tagName(){return"tag:yaml.org,2002:map"}constructor(e){super(U,e),this.items=[]}static from(e,n,o){const{keepUndefined:r,replacer:s}=o,i=new this(e),c=(a,u)=>{if(typeof s=="function")u=s.call(n,a,u);else if(Array.isArray(s)&&!s.includes(a))return;(u!==void 0||r)&&i.items.push(ne(a,u,o))};if(n instanceof Map)for(const[a,u]of n)c(a,u);else if(n&&typeof n=="object")for(const a of Object.keys(n))c(a,n[a]);return typeof e.sortMapEntries=="function"&&i.items.sort(e.sortMapEntries),i}add(e,n){var i;let o;C(e)?o=e:!e||typeof e!="object"||!("key"in e)?o=new T(e,e==null?void 0:e.value):o=new T(e.key,e.value);const r=Y(this.items,o.key),s=(i=this.schema)==null?void 0:i.sortMapEntries;if(r){if(!n)throw new Error(`Key ${o.key} already set`);N(r.value)&&Le(o.value)?r.value.value=o.value:r.value=o.value}else if(s){const c=this.items.findIndex(a=>s(o,a)<0);c===-1?this.items.push(o):this.items.splice(c,0,o)}else this.items.push(o)}delete(e){const n=Y(this.items,e);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(e,n){var r;const o=(r=Y(this.items,e))==null?void 0:r.value;return(!n&&N(o)?o.value:o)??void 0}has(e){return!!Y(this.items,e)}set(e,n){this.add(new T(e,n),!0)}toJSON(e,n,o){const r=o?new o:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(r);for(const s of this.items)Ke(n,r,s);return r}toString(e,n,o){if(!e)return JSON.stringify(this);for(const r of this.items)if(!C(r))throw new Error(`Map items must all be pairs; found ${JSON.stringify(r)} instead`);return!e.allNullValues&&this.hasAllNullValues(!1)&&(e=Object.assign({},e,{allNullValues:!0})),We(this,e,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:e.indent||"",onChompKeep:o,onComment:n})}}const et={collection:"map",default:!0,nodeClass:K,tag:"tag:yaml.org,2002:map",resolve(t,e){return ct(t)||e("Expected a mapping for this tag"),t},createNode:(t,e,n)=>K.from(t,e,n)};class It extends Fe{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(e){super(G,e),this.items=[]}add(e){this.items.push(e)}delete(e){const n=xt(e);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(e,n){const o=xt(e);if(typeof o!="number")return;const r=this.items[o];return!n&&N(r)?r.value:r}has(e){const n=xt(e);return typeof n=="number"&&n<this.items.length}set(e,n){const o=xt(e);if(typeof o!="number")throw new Error(`Expected a valid index, not ${e}.`);const r=this.items[o];N(r)&&Le(n)?r.value=n:this.items[o]=n}toJSON(e,n){const o=[];n!=null&&n.onCreate&&n.onCreate(o);let r=0;for(const s of this.items)o.push(M(s,String(r++),n));return o}toString(e,n,o){return e?We(this,e,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(e.indent||"")+"  ",onChompKeep:o,onComment:n}):JSON.stringify(this)}static from(e,n,o){const{replacer:r}=o,s=new this(e);if(n&&Symbol.iterator in Object(n)){let i=0;for(let c of n){if(typeof r=="function"){const a=n instanceof Set?c:String(i++);c=r.call(n,a,c)}s.items.push(ht(c,void 0,o))}}return s}}function xt(t){let e=N(t)?t.value:t;return e&&typeof e=="string"&&(e=Number(e)),typeof e=="number"&&Number.isInteger(e)&&e>=0?e:null}const nt={collection:"seq",default:!0,nodeClass:It,tag:"tag:yaml.org,2002:seq",resolve(t,e){return ut(t)||e("Expected a sequence for this tag"),t},createNode:(t,e,n)=>It.from(t,e,n)},_t={identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify(t,e,n,o){return e=Object.assign({actualString:!0},e),te(t,e,n,o)}},Mt={identify:t=>t==null,createNode:()=>new $(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new $(null),stringify:({source:t},e)=>typeof t=="string"&&Mt.test.test(t)?t:e.options.nullStr},oe={identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:t=>new $(t[0]==="t"||t[0]==="T"),stringify({source:t,value:e},n){if(t&&oe.test.test(t)){const o=t[0]==="t"||t[0]==="T";if(e===o)return t}return e?n.options.trueStr:n.options.falseStr}};function L({format:t,minFractionDigits:e,tag:n,value:o}){if(typeof o=="bigint")return String(o);const r=typeof o=="number"?o:Number(o);if(!isFinite(r))return isNaN(r)?".nan":r<0?"-.inf":".inf";let s=JSON.stringify(o);if(!t&&e&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(s)){let i=s.indexOf(".");i<0&&(i=s.length,s+=".");let c=e-(s.length-i-1);for(;c-- >0;)s+="0"}return s}const Re={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:L},qe={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():L(t)}},Ve={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(t){const e=new $(parseFloat(t)),n=t.indexOf(".");return n!==-1&&t[t.length-1]==="0"&&(e.minFractionDigits=t.length-n-1),e},stringify:L},Tt=t=>typeof t=="bigint"||Number.isInteger(t),se=(t,e,n,{intAsBigInt:o})=>o?BigInt(t):parseInt(t.substring(e),n);function Ye(t,e,n){const{value:o}=t;return Tt(o)&&o>=0?n+o.toString(e):L(t)}const Qe={identify:t=>Tt(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(t,e,n)=>se(t,2,8,n),stringify:t=>Ye(t,8,"0o")},Ge={identify:Tt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(t,e,n)=>se(t,0,10,n),stringify:L},ze={identify:t=>Tt(t)&&t>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(t,e,n)=>se(t,2,16,n),stringify:t=>Ye(t,16,"0x")},no=[et,nt,_t,Mt,oe,Qe,Ge,ze,Re,qe,Ve];function Xe(t){return typeof t=="bigint"||Number.isInteger(t)}const Bt=({value:t})=>JSON.stringify(t),oo=[{identify:t=>typeof t=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:t=>t,stringify:Bt},{identify:t=>t==null,createNode:()=>new $(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:Bt},{identify:t=>typeof t=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:t=>t==="true",stringify:Bt},{identify:Xe,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(t,e,{intAsBigInt:n})=>n?BigInt(t):parseInt(t,10),stringify:({value:t})=>Xe(t)?t.toString():JSON.stringify(t)},{identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:t=>parseFloat(t),stringify:Bt}],so={default:!0,tag:"",test:/^/,resolve(t,e){return e(`Unresolved plain scalar ${JSON.stringify(t)}`),t}},ro=[et,nt].concat(oo,so),re={identify:t=>t instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(t,e){if(typeof atob=="function"){const n=atob(t.replace(/[\n\r]/g,"")),o=new Uint8Array(n.length);for(let r=0;r<n.length;++r)o[r]=n.charCodeAt(r);return o}else return e("This environment does not support reading binary tags; either Buffer or atob is required"),t},stringify({comment:t,type:e,value:n},o,r,s){if(!n)return"";const i=n;let c;if(typeof btoa=="function"){let a="";for(let u=0;u<i.length;++u)a+=String.fromCharCode(i[u]);c=btoa(a)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(e??(e=$.BLOCK_LITERAL),e!==$.QUOTE_DOUBLE){const a=Math.max(o.options.lineWidth-o.indent.length,o.options.minContentWidth),u=Math.ceil(c.length/a),m=new Array(u);for(let h=0,p=0;h<u;++h,p+=a)m[h]=c.substr(p,a);c=m.join(e===$.BLOCK_LITERAL?`
`:" ")}return te({comment:t,type:e,value:c},o,r,s)}};function He(t,e){if(ut(t))for(let n=0;n<t.items.length;++n){let o=t.items[n];if(!C(o)){if(ct(o)){o.items.length>1&&e("Each pair must have its own sequence indicator");const r=o.items[0]||new T(new $(null));if(o.commentBefore&&(r.key.commentBefore=r.key.commentBefore?`${o.commentBefore}
${r.key.commentBefore}`:o.commentBefore),o.comment){const s=r.value??r.key;s.comment=s.comment?`${o.comment}
${s.comment}`:o.comment}o=r}t.items[n]=C(o)?o:new T(o)}}else e("Expected a sequence for this tag");return t}function Ze(t,e,n){const{replacer:o}=n,r=new It(t);r.tag="tag:yaml.org,2002:pairs";let s=0;if(e&&Symbol.iterator in Object(e))for(let i of e){typeof o=="function"&&(i=o.call(e,String(s++),i));let c,a;if(Array.isArray(i))if(i.length===2)c=i[0],a=i[1];else throw new TypeError(`Expected [key, value] tuple: ${i}`);else if(i&&i instanceof Object){const u=Object.keys(i);if(u.length===1)c=u[0],a=i[c];else throw new TypeError(`Expected tuple with one key, not ${u.length} keys`)}else c=i;r.items.push(ne(c,a,n))}return r}const ie={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:He,createNode:Ze};class ot extends It{constructor(){super(),this.add=K.prototype.add.bind(this),this.delete=K.prototype.delete.bind(this),this.get=K.prototype.get.bind(this),this.has=K.prototype.has.bind(this),this.set=K.prototype.set.bind(this),this.tag=ot.tag}toJSON(e,n){if(!n)return super.toJSON(e);const o=new Map;n!=null&&n.onCreate&&n.onCreate(o);for(const r of this.items){let s,i;if(C(r)?(s=M(r.key,"",n),i=M(r.value,s,n)):s=M(r,"",n),o.has(s))throw new Error("Ordered maps must not include duplicate keys");o.set(s,i)}return o}static from(e,n,o){const r=Ze(e,n,o),s=new this;return s.items=r.items,s}}ot.tag="tag:yaml.org,2002:omap";const ae={collection:"seq",identify:t=>t instanceof Map,nodeClass:ot,default:!1,tag:"tag:yaml.org,2002:omap",resolve(t,e){const n=He(t,e),o=[];for(const{key:r}of n.items)N(r)&&(o.includes(r.value)?e(`Ordered maps must not include duplicate keys: ${r.value}`):o.push(r.value));return Object.assign(new ot,n)},createNode:(t,e,n)=>ot.from(t,e,n)};function tn({value:t,source:e},n){return e&&(t?en:nn).test.test(e)?e:t?n.options.trueStr:n.options.falseStr}const en={identify:t=>t===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new $(!0),stringify:tn},nn={identify:t=>t===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new $(!1),stringify:tn},io={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:t=>t.slice(-3).toLowerCase()==="nan"?NaN:t[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:L},ao={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:t=>parseFloat(t.replace(/_/g,"")),stringify(t){const e=Number(t.value);return isFinite(e)?e.toExponential():L(t)}},lo={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(t){const e=new $(parseFloat(t.replace(/_/g,""))),n=t.indexOf(".");if(n!==-1){const o=t.substring(n+1).replace(/_/g,"");o[o.length-1]==="0"&&(e.minFractionDigits=o.length)}return e},stringify:L},gt=t=>typeof t=="bigint"||Number.isInteger(t);function Lt(t,e,n,{intAsBigInt:o}){const r=t[0];if((r==="-"||r==="+")&&(e+=1),t=t.substring(e).replace(/_/g,""),o){switch(n){case 2:t=`0b${t}`;break;case 8:t=`0o${t}`;break;case 16:t=`0x${t}`;break}const i=BigInt(t);return r==="-"?BigInt(-1)*i:i}const s=parseInt(t,n);return r==="-"?-1*s:s}function le(t,e,n){const{value:o}=t;if(gt(o)){const r=o.toString(e);return o<0?"-"+n+r.substr(1):n+r}return L(t)}const co={identify:gt,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(t,e,n)=>Lt(t,2,2,n),stringify:t=>le(t,2,"0b")},uo={identify:gt,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(t,e,n)=>Lt(t,1,8,n),stringify:t=>le(t,8,"0")},fo={identify:gt,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(t,e,n)=>Lt(t,0,10,n),stringify:L},ho={identify:gt,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(t,e,n)=>Lt(t,2,16,n),stringify:t=>le(t,16,"0x")};class st extends K{constructor(e){super(e),this.tag=st.tag}add(e){let n;C(e)?n=e:e&&typeof e=="object"&&"key"in e&&"value"in e&&e.value===null?n=new T(e.key,null):n=new T(e,null),Y(this.items,n.key)||this.items.push(n)}get(e,n){const o=Y(this.items,e);return!n&&C(o)?N(o.key)?o.key.value:o.key:o}set(e,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);const o=Y(this.items,e);o&&!n?this.items.splice(this.items.indexOf(o),1):!o&&n&&this.items.push(new T(e))}toJSON(e,n){return super.toJSON(e,n,Set)}toString(e,n,o){if(!e)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},e,{allNullValues:!0}),n,o);throw new Error("Set items must all have null values")}static from(e,n,o){const{replacer:r}=o,s=new this(e);if(n&&Symbol.iterator in Object(n))for(let i of n)typeof r=="function"&&(i=r.call(n,i,i)),s.items.push(ne(i,null,o));return s}}st.tag="tag:yaml.org,2002:set";const ce={collection:"map",identify:t=>t instanceof Set,nodeClass:st,default:!1,tag:"tag:yaml.org,2002:set",createNode:(t,e,n)=>st.from(t,e,n),resolve(t,e){if(ct(t)){if(t.hasAllNullValues(!0))return Object.assign(new st,t);e("Set items must all have null values")}else e("Expected a mapping for this tag");return t}};function ue(t,e){const n=t[0],o=n==="-"||n==="+"?t.substring(1):t,r=i=>e?BigInt(i):Number(i),s=o.replace(/_/g,"").split(":").reduce((i,c)=>i*r(60)+r(c),r(0));return n==="-"?r(-1)*s:s}function on(t){let{value:e}=t,n=i=>i;if(typeof e=="bigint")n=i=>BigInt(i);else if(isNaN(e)||!isFinite(e))return L(t);let o="";e<0&&(o="-",e*=n(-1));const r=n(60),s=[e%r];return e<60?s.unshift(0):(e=(e-s[0])/r,s.unshift(e%r),e>=60&&(e=(e-s[0])/r,s.unshift(e))),o+s.map(i=>String(i).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}const sn={identify:t=>typeof t=="bigint"||Number.isInteger(t),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(t,e,{intAsBigInt:n})=>ue(t,n),stringify:on},rn={identify:t=>typeof t=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:t=>ue(t,!1),stringify:on},Ft={identify:t=>t instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(t){const e=t.match(Ft.test);if(!e)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");const[,n,o,r,s,i,c]=e.map(Number),a=e[7]?Number((e[7]+"00").substr(1,3)):0;let u=Date.UTC(n,o-1,r,s||0,i||0,c||0,a);const m=e[8];if(m&&m!=="Z"){let h=ue(m,!1);Math.abs(h)<30&&(h*=60),u-=6e4*h}return new Date(u)},stringify:({value:t})=>(t==null?void 0:t.toISOString().replace(/(T00:00:00)?\.000Z$/,""))??""},an=[et,nt,_t,Mt,en,nn,co,uo,fo,ho,io,ao,lo,re,D,ae,ie,ce,sn,rn,Ft],ln=new Map([["core",no],["failsafe",[et,nt,_t]],["json",ro],["yaml11",an],["yaml-1.1",an]]),cn={binary:re,bool:oe,float:Ve,floatExp:qe,floatNaN:Re,floatTime:rn,int:Ge,intHex:ze,intOct:Qe,intTime:sn,map:et,merge:D,null:Mt,omap:ae,pairs:ie,seq:nt,set:ce,timestamp:Ft},po={"tag:yaml.org,2002:binary":re,"tag:yaml.org,2002:merge":D,"tag:yaml.org,2002:omap":ae,"tag:yaml.org,2002:pairs":ie,"tag:yaml.org,2002:set":ce,"tag:yaml.org,2002:timestamp":Ft};function fe(t,e,n){const o=ln.get(e);if(o&&!t)return n&&!o.includes(D)?o.concat(D):o.slice();let r=o;if(!r)if(Array.isArray(t))r=[];else{const s=Array.from(ln.keys()).filter(i=>i!=="yaml11").map(i=>JSON.stringify(i)).join(", ");throw new Error(`Unknown schema "${e}"; use one of ${s} or define customTags array`)}if(Array.isArray(t))for(const s of t)r=r.concat(s);else typeof t=="function"&&(r=t(r.slice()));return n&&(r=r.concat(D)),r.reduce((s,i)=>{const c=typeof i=="string"?cn[i]:i;if(!c){const a=JSON.stringify(i),u=Object.keys(cn).map(m=>JSON.stringify(m)).join(", ");throw new Error(`Unknown custom tag ${a}; use one of ${u}`)}return s.includes(c)||s.push(c),s},[])}const go=(t,e)=>t.key<e.key?-1:t.key>e.key?1:0;class he{constructor({compat:e,customTags:n,merge:o,resolveKnownTags:r,schema:s,sortMapEntries:i,toStringDefaults:c}){this.compat=Array.isArray(e)?fe(e,"compat"):e?fe(null,e):null,this.name=typeof s=="string"&&s||"core",this.knownTags=r?po:{},this.tags=fe(n,this.name,o),this.toStringOptions=c??null,Object.defineProperty(this,U,{value:et}),Object.defineProperty(this,wt,{value:_t}),Object.defineProperty(this,G,{value:nt}),this.sortMapEntries=typeof i=="function"?i:i===!0?go:null}clone(){const e=Object.create(he.prototype,Object.getOwnPropertyDescriptors(this));return e.tags=this.tags.slice(),e}}function mo(t,e){var a;const n=[];let o=e.directives===!0;if(e.directives!==!1&&t.directives){const u=t.directives.toString(t);u?(n.push(u),o=!0):t.directives.docStart&&(o=!0)}o&&n.push("---");const r=Je(t,e),{commentString:s}=r.options;if(t.commentBefore){n.length!==1&&n.unshift("");const u=s(t.commentBefore);n.unshift(P(u,""))}let i=!1,c=null;if(t.contents){if(j(t.contents)){if(t.contents.spaceBefore&&o&&n.push(""),t.contents.commentBefore){const h=s(t.contents.commentBefore);n.push(P(h,""))}r.forceBlockIndent=!!t.comment,c=t.contents.comment}const u=c?void 0:()=>i=!0;let m=tt(t.contents,r,()=>c=null,u);c&&(m+=V(m,"",s(c))),(m[0]==="|"||m[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${m}`:n.push(m)}else n.push(tt(t.contents,r));if((a=t.directives)!=null&&a.docEnd)if(t.comment){const u=s(t.comment);u.includes(`
`)?(n.push("..."),n.push(P(u,""))):n.push(`... ${u}`)}else n.push("...");else{let u=t.comment;u&&i&&(u=u.replace(/^\n+/,"")),u&&((!i||c)&&n[n.length-1]!==""&&n.push(""),n.push(P(s(u),"")))}return n.join(`
`)+`
`}class de{constructor(e,n,o){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,_,{value:Gt});let r=null;typeof n=="function"||Array.isArray(n)?r=n:o===void 0&&n&&(o=n,n=void 0);const s=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},o);this.options=s;let{version:i}=s;o!=null&&o._directives?(this.directives=o._directives.atDocument(),this.directives.yaml.explicit&&(i=this.directives.yaml.version)):this.directives=new x({version:i}),this.setSchema(i,o),this.contents=e===void 0?null:this.createNode(e,r,o)}clone(){const e=Object.create(de.prototype,{[_]:{value:Gt}});return e.commentBefore=this.commentBefore,e.comment=this.comment,e.errors=this.errors.slice(),e.warnings=this.warnings.slice(),e.options=Object.assign({},this.options),this.directives&&(e.directives=this.directives.clone()),e.schema=this.schema.clone(),e.contents=j(this.contents)?this.contents.clone(e.schema):this.contents,this.range&&(e.range=this.range.slice()),e}add(e){rt(this.contents)&&this.contents.add(e)}addIn(e,n){rt(this.contents)&&this.contents.addIn(e,n)}createAlias(e,n){if(!e.anchor){const o=Me(this);e.anchor=!n||o.has(n)?Te(n||"a",o):n}return new Be(e.anchor)}createNode(e,n,o){let r;if(typeof n=="function")e=n.call({"":e},"",e),r=n;else if(Array.isArray(n)){const d=y=>typeof y=="number"||y instanceof String||y instanceof Number,b=n.filter(d).map(String);b.length>0&&(n=n.concat(b)),r=n}else o===void 0&&n&&(o=n,n=void 0);const{aliasDuplicateObjects:s,anchorPrefix:i,flow:c,keepUndefined:a,onTagObj:u,tag:m}=o??{},{onAnchor:h,setAnchors:p,sourceObjects:l}=Kn(this,i||"a"),f={aliasDuplicateObjects:s??!0,keepUndefined:a??!1,onAnchor:h,onTagObj:u,replacer:r,schema:this.schema,sourceObjects:l},g=ht(e,m,f);return c&&E(g)&&(g.flow=!0),p(),g}createPair(e,n,o={}){const r=this.createNode(e,null,o),s=this.createNode(n,null,o);return new T(r,s)}delete(e){return rt(this.contents)?this.contents.delete(e):!1}deleteIn(e){return dt(e)?this.contents==null?!1:(this.contents=null,!0):rt(this.contents)?this.contents.deleteIn(e):!1}get(e,n){return E(this.contents)?this.contents.get(e,n):void 0}getIn(e,n){return dt(e)?!n&&N(this.contents)?this.contents.value:this.contents:E(this.contents)?this.contents.getIn(e,n):void 0}has(e){return E(this.contents)?this.contents.has(e):!1}hasIn(e){return dt(e)?this.contents!==void 0:E(this.contents)?this.contents.hasIn(e):!1}set(e,n){this.contents==null?this.contents=Ot(this.schema,[e],n):rt(this.contents)&&this.contents.set(e,n)}setIn(e,n){dt(e)?this.contents=n:this.contents==null?this.contents=Ot(this.schema,Array.from(e),n):rt(this.contents)&&this.contents.setIn(e,n)}setSchema(e,n={}){typeof e=="number"&&(e=String(e));let o;switch(e){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new x({version:"1.1"}),o={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=e:this.directives=new x({version:e}),o={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,o=null;break;default:{const r=JSON.stringify(e);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${r}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(o)this.schema=new he(Object.assign(o,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:e,jsonArg:n,mapAsMap:o,maxAliasCount:r,onAnchor:s,reviver:i}={}){const c={anchors:new Map,doc:this,keep:!e,mapAsMap:o===!0,mapKeyWarned:!1,maxAliasCount:typeof r=="number"?r:100},a=M(this.contents,n??"",c);if(typeof s=="function")for(const{count:u,res:m}of c.anchors.values())s(m,u);return typeof i=="function"?H(i,{"":a},"",a):a}toJSON(e,n){return this.toJS({json:!0,jsonArg:e,mapAsMap:!1,onAnchor:n})}toString(e={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in e&&(!Number.isInteger(e.indent)||Number(e.indent)<=0)){const n=JSON.stringify(e.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return mo(this,e)}}function rt(t){if(E(t))return!0;throw new Error("Expected a YAML collection as document contents")}new Set("0123456789ABCDEFabcdef"),new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),new Set(",[]{}"),new Set(` ,[]{}
\r	`);function yo(t,e,n){let o=null;if(Array.isArray(e)&&(o=e),t===void 0){const{keepUndefined:r}={};if(!r)return}return lt(t)&&!o?t.toString(n):new de(t,o,n).toString(n)}function mt(t,e,n){if(t==null)return"";let o;const r={},s={};let i="",c="",a="",u=2,m=3,h=2;const p=[];let l=0,f=0;for(let d=0;d<t.length;d+=1)if(i=t.charAt(d),Object.prototype.hasOwnProperty.call(r,i)||(r[i]=m++,s[i]=!0),c=a+i,Object.prototype.hasOwnProperty.call(r,c))a=c;else{if(Object.prototype.hasOwnProperty.call(s,a)){if(a.charCodeAt(0)<256){for(let b=0;b<h;b++)l=l<<1,f==e-1?(f=0,p.push(n(l)),l=0):f++;o=a.charCodeAt(0);for(let b=0;b<8;b++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1}else{o=1;for(let b=0;b<h;b++)l=l<<1|o,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=0;o=a.charCodeAt(0);for(let b=0;b<16;b++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1}u--,u==0&&(u=Math.pow(2,h),h++),delete s[a]}else{o=r[a];for(let b=0;b<h;b++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1}u--,u==0&&(u=Math.pow(2,h),h++),r[c]=m++,a=String(i)}if(a!==""){if(Object.prototype.hasOwnProperty.call(s,a)){if(a.charCodeAt(0)<256){for(let d=0;d<h;d++)l=l<<1,f==e-1?(f=0,p.push(n(l)),l=0):f++;o=a.charCodeAt(0);for(let d=0;d<8;d++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1}else{o=1;for(let d=0;d<h;d++)l=l<<1|o,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=0;o=a.charCodeAt(0);for(let d=0;d<16;d++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1}u--,u==0&&(u=Math.pow(2,h),h++),delete s[a]}else{o=r[a];for(let d=0;d<h;d++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1}u--,u==0&&(u=Math.pow(2,h),h++)}o=2;for(let d=0;d<h;d++)l=l<<1|o&1,f==e-1?(f=0,p.push(n(l)),l=0):f++,o=o>>1;let g=!0;do l=l<<1,f==e-1?(p.push(n(l)),g=!1):f++;while(g);return p.join("")}function yt(t,e,n){const o=[],r=[],s={val:n(0),position:e,index:1};let i=4,c=4,a=3,u="",m,h=0,p=Math.pow(2,2),l=1;for(let d=0;d<3;d+=1)o[d]=String(d);for(;l!=p;){const d=s.val&s.position;s.position>>=1,s.position==0&&(s.position=e,s.val=n(s.index++)),h|=(d>0?1:0)*l,l<<=1}switch(h){case 0:for(h=0,p=Math.pow(2,8),l=1;l!=p;){const d=s.val&s.position;s.position>>=1,s.position==0&&(s.position=e,s.val=n(s.index++)),h|=(d>0?1:0)*l,l<<=1}m=String.fromCharCode(h);break;case 1:for(h=0,p=Math.pow(2,16),l=1;l!=p;){const d=s.val&s.position;s.position>>=1,s.position==0&&(s.position=e,s.val=n(s.index++)),h|=(d>0?1:0)*l,l<<=1}m=String.fromCharCode(h);break;case 2:return""}if(m===void 0)throw new Error("No character found");o[3]=String(m);let f=String(m);r.push(String(m));const g=!0;for(;g;){if(s.index>t)return"";for(h=0,p=Math.pow(2,a),l=1;l!=p;){const d=s.val&s.position;s.position>>=1,s.position==0&&(s.position=e,s.val=n(s.index++)),h|=(d>0?1:0)*l,l<<=1}switch(m=h){case 0:for(h=0,p=Math.pow(2,8),l=1;l!=p;){const d=s.val&s.position;s.position>>=1,s.position==0&&(s.position=e,s.val=n(s.index++)),h|=(d>0?1:0)*l,l<<=1}o[c++]=String.fromCharCode(h),m=c-1,i--;break;case 1:for(h=0,p=Math.pow(2,16),l=1;l!=p;){const d=s.val&s.position;s.position>>=1,s.position==0&&(s.position=e,s.val=n(s.index++)),h|=(d>0?1:0)*l,l<<=1}o[c++]=String.fromCharCode(h),m=c-1,i--;break;case 2:return r.join("")}if(i==0&&(i=Math.pow(2,a),a++),o[m])u=String(o[m]);else if(m===c)u=f+f.charAt(0);else return null;r.push(u),o[c++]=f+u.charAt(0),i--,f=u,i==0&&(i=Math.pow(2,a),a++)}}const un="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function bo(t){if(t==null)return"";const e=mt(t,6,n=>un.charAt(n));switch(e.length%4){default:case 0:return e;case 1:return e+"===";case 2:return e+"==";case 3:return e+"="}}const Pt={};function fn(t,e){if(!Pt[t]){Pt[t]={};for(let n=0;n<t.length;n++)Pt[t][t.charAt(n)]=n}return Pt[t][e]}function vo(t){return t==null?"":t==""?null:yt(t.length,32,e=>fn(un,t.charAt(e)))}function pe(t){return t==null?"":mt(t,16,e=>String.fromCharCode(e))}function wo(t,e){if(t==null)return"";const n=pe(t),o=Math.ceil(Math.log(65536)/Math.log(e.length));let r="";for(let s=0,i=n.length;s<i;s++){let c=n.charCodeAt(s);for(let a=o-1;a>=0;a--){const u=Math.floor(c/Math.pow(e.length,a));c=c%Math.pow(e.length,a),r+=e.charAt(u)}}return r}function Dt(t){return t==null?"":t==""?null:yt(t.length,32768,e=>t.charCodeAt(e))}function So(t,e){if(t==null)return"";if(t==""||e.length<2)return null;const n=Math.ceil(Math.log(65536)/Math.log(e.length));if(t.length%n!=0)return null;let o="",r,s;for(let i=0,c=t.length;i<c;i=i+n){r=0;for(let a=0;a<n;a++)s=e.indexOf(t[i+a]),r=r+s*Math.pow(e.length,n-1-a);o=o+String.fromCharCode(r)}return Dt(o)}const hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$";function Oo(t){return t==null?"":mt(t,6,e=>hn.charAt(e))}function $o(t){return t==null?"":t==""?null:(t=t.replace(/ /g,"+"),yt(t.length,32,e=>fn(hn,t.charAt(e))))}function dn(t,e){if(typeof t=="string"){const n=!e&&t.charCodeAt(t.length-1)%256===0,o=new Uint8Array(t.length*2-(n?1:0));for(let r=0;r<t.length;r++){const s=t.charCodeAt(r);o[r*2]=s>>>8,(!n||r<t.length-1)&&(o[r*2+1]=s%256)}return o}return t}function ge(t){const e=Math.floor(t.byteLength/2),n=[];for(let o=0;o<e;o++)n.push(String.fromCharCode(t[o*2]*256+t[o*2+1]));return t.byteLength&1&&n.push(String.fromCharCode(t[t.byteLength-1]*256)),n.join("")}function Ao(t,e){On.writeFileSync(t,typeof e=="string"?dn(e):e,null)}function No(t){return ge(On.readFileSync(t,null))}function ko(t){const e=pe(t),n=new Uint8Array(e.length*2);for(let o=0,r=e.length;o<r;o++){const s=e.charCodeAt(o);n[o*2]=s>>>8,n[o*2+1]=s%256}return n}function Eo(t){return t==null?Dt(t):Dt(ge(t))}function jo(t){return t==null?"":mt(t,15,e=>String.fromCharCode(e+32))+" "}function Co(t){return t==null?"":t==""?null:yt(t.length,16384,e=>t.charCodeAt(e)-32)}Kt={_compress:mt,_decompress:yt,compress:pe,compressToBase64:bo,compressToCustom:wo,compressToEncodedURIComponent:Oo,compressToUint8Array:ko,compressToUTF16:jo,convertFromUint8Array:ge,convertToUint8Array:dn,decompress:Dt,decompressFromBase64:vo,decompressFromCustom:So,decompressFromEncodedURIComponent:$o,decompressFromUint8Array:Eo,decompressFromUTF16:Co,loadBinaryFile:No,saveBinaryFile:Ao};function me(t){return new Promise((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)})}function Io(t,e){let n;const o=()=>{if(n)return n;const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),n=me(r),n.then(s=>{s.onclose=()=>n=void 0},()=>{}),n};return(r,s)=>o().then(i=>s(i.transaction(e,r).objectStore(e)))}let ye;function pn(){return ye||(ye=Io("keyval-store","keyval")),ye}function xo(t,e=pn()){return e("readonly",n=>me(n.get(t)))}function _o(t,e,n=pn()){return n("readwrite",o=>(o.put(e,t),me(o.transaction)))}async function Mo(t={}){const e=be(),n=Ut();n.add({message:"Starting cache build...",type:"info"});const o=Object.assign({store:!0,kind:"full"},t);let r=[],s={},i={last_generated:null,last_full_build:null,file_url:null,file_size:0};n.add({message:"Getting the latest Simple File System data...",type:"info"}),await e.get("admin/settings/cache/providers").then(l=>{r=l.data.providers}),await e.get("admin/settings/cache/index").then(l=>{i=l.data.cache}),await e.request("/admin/volume/index",{method:"GET"}).then(l=>l.data).then(l=>{s=l.entries.reduce((f,g)=>(f[`/${g.relative_path}`]=g.content,f),{})}),o.tailwindcss_version||await e.request("/admin/settings/options/index",{method:"GET"}).then(l=>{const f=Number(Go(l.data.options,"general.tailwindcss.version",4));f===3||f===4?o.tailwindcss_version=f:o.tailwindcss_version=4}),(r.length===0||r.filter(l=>l.enabled).length===0)&&n.add({message:"No scanner provider found. If this is unexpected, please check the integrations setting page.",type:"warning"});let c=[];async function a(l){var d,b;let f=!1,g=[];if(o.kind==="incremental"&&((d=o.incremental)!=null&&d.providers)&&!o.incremental.providers.includes(l.id)){let y=await xo(`windpress.cache.provider.${l.id}`);if(y){let v=Kt.decompressFromUTF16(y),w=v?JSON.parse(v):null;if(w&&!(i.last_full_build!==null&&Number(w.timestamp)<Number(i.last_full_build)))return c.push(...w.contents),n.add({message:`Using cached sources for provider: ${l.name}`,type:"info"}),Promise.resolve()}}try{do{let y=Sn(10),v=`Scanning provider: ${l.name}... (${f!==!1?f:"initial"})`;n.add({message:v,type:"info",id:y});const w=await e.post("admin/settings/cache/providers/scan",{provider_id:l.id,metadata:{next_batch:f}}).then(O=>O.data).catch(O=>{throw n.update(y,{type:"error",message:`${v} - failed: ${O.statusText} -> ${O.data.message}`}),O});g.push(...w.contents),f=((b=w.metadata)==null?void 0:b.next_batch)||!1,n.update(y,{type:"info",message:`${v} - done`})}while(f!==!1)}catch(y){throw n.add({message:"Canceling cache build...",type:"info"}),y}return c.push(...g),_o(`windpress.cache.provider.${l.id}`,Kt.compressToUTF16(JSON.stringify({contents:g,timestamp:Date.now()}))),Promise.resolve()}const u=r.filter(l=>l.enabled).map(l=>a(l));await Promise.all(u);const m=c.map(l=>{let f=atob(l.content);return l.type==="json"&&(f=yo(JSON.parse(f))),Bn(f)});let h=null,p=null;if(o.tailwindcss_version===4){const{compile:l,find_tw_candidates:f,optimize:g,loadSource:d}=await mn(async()=>{const{compile:O,find_tw_candidates:k,optimize:S,loadSource:A}=await import("./index-uptw-R0G.js").then(async I=>(await I.__tla,I));return{compile:O,find_tw_candidates:k,optimize:S,loadSource:A}},[],import.meta.url),b=[];m.forEach(O=>{const k=f(O);b.push(...k)});const y=await l({entrypoint:"/main.css",volume:s});let v=[...new Set([...b,...await d(y.sources)])];n.add({message:"Scanning complete",type:"success"}),n.add({message:`Found ${v.length} candidates`,type:"info",options:{raw:!0,candidates:v.sort()}}),n.add({message:"Building cache...",type:"info"});const w=y.build(v);h=(await g({css:w})).css,p=(await g({css:w,minify:!0})).css}else if(o.tailwindcss_version===3){const{build:l,optimize:f}=await mn(async()=>{const{build:d,optimize:b}=await import("./index-BkzRyR6p.js").then(async y=>(await y.__tla,y));return{build:d,optimize:b}},[],import.meta.url);n.add({message:"Scanning complete",type:"success"}),n.add({message:"Building cache...",type:"info"});const g=await l({entrypoint:{css:"/main.css",config:"/tailwind.config.js"},contents:m,volume:s});h=(await f(g)).css,p=(await f(g,!0)).css}return n.add({message:"Cache built",type:"success"}),i.last_generated=Date.now(),i.last_full_build=o.kind==="full"?Date.now():i.last_full_build,o.store===!0&&await e.post("admin/settings/cache/store",{content:Lo(p||""),full_build:o.kind==="full"?i.last_full_build:null}).then(l=>{i=l.data.cache,n.add({message:"Cache stored",type:"success"})}),{normal:h,minified:p,css_cache:i}}function gn(){const t=new BroadcastChannel("windpress");let e=Promise.resolve();t.addEventListener("message",async n=>{const o=n.data;["windpress/dashboard","windpress/integration"].includes(o.source)&&o.target==="windpress/compiler"&&o.task==="generate-cache"&&(e=e.then(async()=>{await Mo(o.data).then(()=>{t.postMessage({source:"windpress/compiler",target:"windpress/dashboard",task:"generate-cache.response",data:{status:"success"}})}).catch(r=>{t.postMessage({source:"windpress/compiler",target:"windpress/dashboard",task:"generate-cache.response",data:{status:"error"}}),console.error(r)})}).catch(r=>{console.error(r)}))})}An=async function(){"locks"in navigator?navigator.locks.request("task_lock",{mode:"exclusive"},t=>(console.log("Lock acquired. Starting worker."),gn(),new Promise(()=>{}))).catch(()=>{console.log("Failed to acquire lock. Worker already running in another tab.")}):(console.log("Locks API not supported in this browser. Starting worker without lock."),gn())}})();export{zo as __tla,be as a,$n as b,Ut as c,ve as d,An as s,Nn as u,Kt as w};
