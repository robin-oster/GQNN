import{_ as L}from"./Switch-D5koBcFQ.min.js";import{_ as T}from"./Separator-ozYRGkOb.min.js";import{m as S,n as b,e as Y,j as B,i as z,a as R,c as C,p as F,_ as N,v as X,k as Z}from"./dashboard-DzHlilbd.js";import{_ as $,a as H}from"./PageCard-BFpt6-Gk.min.js";import{_ as J}from"./FormField-DCT8zL7L.min.js";import{v as V}from"./runtime-dom.esm-bundler-CZCO9KQc.min.js";import{d as K,a as M}from"./worker-2mJa2xxM.js";import{g as Q}from"./get-DBhW7rda.min.js";import{V as O,a6 as ee,m as ie,af as se,w as ae,a4 as te,_ as k,X as j,j as t,Y as n,ak as ne,u as i,F as x,a2 as w,a3 as m,al as le,Z as o,am as q,a1 as y}from"./runtime-core.esm-bundler-HqF9pg4M.min.js";import{v as re}from"./package-BtTmAzXr.min.js";import"./index-l5GBeiGs.min.js";import"./isObject-K1YoVIH1.min.js";import"./preload-helper-CsYsLKPR.min.js";import"./index-Dfl2EUB3.min.js";import"./source-map-generator-DjbDy59a.min.js";import"./chunk-HTB5LLOP-Cay67bh1.min.js";import"./floating-ui.core-0WkvgGWJ.min.js";import"./virtualRef-CgRKHaPH.js";import"./set-Dt5k9sTt.min.js";import"./_toKey-BxB36GnB.min.js";import"./_initCloneObject-DlLbeobz.min.js";import"./fuse-Ch1WBRTM.min.js";import"./index-C5HG4pYD.min.js";import"./index-BAMY2Nnw.min.js";import"./index.browser-B0na17u1.min.js";import"./redaxios.module-D8m3meIN.min.js";import"./index-BQgNu2nd.min.js";const oe=K("license",()=>{const _=S(),g=M(),r=O({key:""}),s=ee(()=>Q(r.value,"is_activated",!1));async function c(){return _.add("settings.license.doPull"),await g.request("/admin/settings/license/index",{method:"GET"}).then(a=>{r.value=b(a.data.license)}).catch(a=>{}).finally(()=>{_.remove("settings.license.doPull")})}async function d(a){return _.add("settings.license.activate"),g.request("/admin/settings/license/activate",{method:"POST",data:{license:a}}).then(u=>(r.value=b(u.data.license),{message:u.data.message,success:!0})).catch(u=>{throw new Error(u.data?u.data.message:u.message)}).finally(()=>{_.remove("settings.license.activate")})}async function v(){return _.add("settings.license.deactivate"),g.request("/admin/settings/license/deactivate",{method:"POST",data:{license:r.value}}).then(a=>(r.value=b(a.data.license),{message:a.data.message,success:!0})).catch(a=>{throw new Error(a.response?a.response.data.message:a.message)}).finally(()=>{_.remove("settings.license.deactivate")})}return{license:r,isActivated:s,doPull:c,doActivate:d,doDeactivate:v}}),de={class:"flex flex-row gap-4 my-2"},ce={class:"flex items-center gap-2"},ue={class:"text-(--ui-text-muted)"},pe={class:"grid grid-cols-2 gap-3"},me={class:"flex items-center justify-center rounded-md p-3 font-semibold flex-1 bg-(--ui-bg-accented) hover:ring-(--ui-text)/50 hover:ring-1 has-checked:bg-[#0073e0] has-checked:text-white"},_e={class:"flex items-center justify-center rounded-md p-3 font-semibold flex-1 bg-(--ui-bg-accented) hover:ring-(--ui-text)/50 hover:ring-1 has-checked:bg-[#0073e0] has-checked:text-white"},ve=ie({__name:"General",setup(_){const g=z(),r=Y(),s=oe(),c=B(),d=S(),v=O(!1),a=se({key:""});ae(()=>a.key,()=>{v.value=!1});function u(){v.value=!1,r.add({id:"license.change",title:s.license.key&&s.isActivated?wp.i18n.__("Deactivating license...","windprees"):wp.i18n.__("Activating license...","windpress"),description:s.license.key&&s.isActivated?wp.i18n.__("Please wait while we deactivate your license key.","windpress"):wp.i18n.__("Please wait while we activate your license key.","windpress"),icon:"lucide:loader-circle",close:!1,duration:0,color:"neutral",ui:{icon:"animate-spin"}}),(s.license.key&&s.isActivated?s.doDeactivate():s.doActivate(a.key)).then(()=>{a.key=s.license.key,r.update("license.change",{title:wp.i18n.__("License updated","windpress"),description:s.isActivated?wp.i18n.__("Your license key has been activated.","windpress"):wp.i18n.__("Your license key has been deactivated.","windpress"),icon:"lucide:key-round",color:"success",duration:void 0,close:!0,ui:{icon:void 0}})}).catch(e=>{r.update("license.change",{title:wp.i18n.__("License update failed","windpress"),description:e instanceof Error?e.message:wp.i18n.__("An unknown error occurred","windpress"),icon:"lucide:key-round",color:"error",close:!0,duration:void 0,ui:{icon:void 0}}),v.value=wp.i18n.__("Invalid license key","windpress")})}return te(()=>{s.doPull().then(()=>{a.key=s.license.key})}),(e,p)=>{const A=R,f=H,U=F,D=N,W=C,h=J,P=$,E=Z,G=T,I=L;return y(),k(x,null,[e.window.windpress._via_wp_org?(y(),j(f,{key:0,title:e.i18n.__("License","windpress"),class:"bg-gradient-to-tl from-(--ui-primary)/10 from-5% to-(--ui-bg)"},{description:n(()=>[w(m(e.i18n.__("You are using the WordPress.org edition.","windpress")),1)]),footer:n(()=>[t(A,{label:e.i18n.__("Upgrade to Pro","windpress"),color:"primary","trailing-icon":i(g).ui.icons.external,ui:{trailingIcon:"inline-block size-3 align-top",base:"gap-[normal] items-start"},to:`https://wind.press/?utm_source=wordpress-plugins&utm_medium=plugin-menu&utm_campaign=windpress&utm_id=all-edition&windpress_version=${e.window.windpress._version}#pricing`,target:"_blank"},null,8,["label","trailing-icon","to"])]),_:1},8,["title"])):(y(),j(f,{key:1,title:"License",description:"",class:ne([i(s).isActivated?"from-(--ui-primary)/10":"from-(--ui-warning)/10","bg-gradient-to-tl from-5% to-(--ui-bg)"])},{default:n(()=>[t(P,{state:a,onSubmit:u},{default:n(()=>[t(h,{label:e.i18n.__("License key","windpress"),required:"",error:v.value,help:e.i18n.__("To access updates when they are available, please provide your license key.","windpress")},le({default:n(()=>[o("div",de,[t(U,{modelValue:a.key,"onUpdate:modelValue":p[0]||(p[0]=l=>a.key=l),type:"password",placeholder:"WIND-12345-67890-PRESS",class:"w-full","data-1p-ignore":""},null,8,["modelValue"]),t(D,{"delay-duration":0,text:i(s).isActivated?e.i18n.__("Unregister your WindPress setup","windpress"):e.i18n.__("Register your WindPress setup","windpress")},{default:n(()=>[t(A,{type:"submit",color:"primary",variant:"subtle","leading-icon":i(d).isBusy&&i(d).tasks.some(l=>l.task==="settings.license.activate"||l.task==="settings.license.deactivate")?"lucide:loader-circle":void 0,disabled:!a.key||i(d).isBusy,ui:{leadingIcon:"animate-spin"}},{default:n(()=>[i(s).isActivated?(y(),k(x,{key:0},[w(m(i(d).isBusy&&i(d).tasks.some(l=>l.task==="settings.license.deactivate")?e.i18n.__("Deactivating","windpress"):e.i18n.__("Deactivate","windpress")),1)],64)):(y(),k(x,{key:1},[w(m(i(d).isBusy&&i(d).tasks.some(l=>l.task==="settings.license.activate")?e.i18n.__("Activating","windpress"):e.i18n.__("Activate","windpress")),1)],64))]),_:1},8,["leading-icon","disabled"])]),_:1},8,["text"])])]),_:2},[i(s).license.key?{name:"hint",fn:n(()=>[o("div",ce,[o("span",ue,m(e.i18n.__("Status","windpress"))+" :",1),t(W,{color:i(s).isActivated?"success":"error",variant:"subtle"},{default:n(()=>[w(m(i(s).isActivated?e.i18n.__("Active","windpress"):e.i18n.__("Inactive","windpress")),1)]),_:1},8,["color"])])]),key:"0"}:void 0]),1032,["label","error","help"])]),_:1},8,["state"])]),_:1},8,["class"])),t(P,{id:"general",state:{}},{default:n(()=>[t(f,{title:e.i18n.__("General","windpress"),description:e.i18n.__("General settings for WindPress.","windpress"),variant:"naked",orientation:"horizontal",class:"mb-4"},null,8,["title","description"]),t(f,{variant:"subtle"},{default:n(()=>[t(h,{label:e.i18n.__("Tailwind CSS version","windpress"),description:e.i18n.__("You must update the `main.css` file accordingly.","windpress"),class:"flex max-sm:flex-col justify-between items-start gap-4",ui:{container:"flex-1"}},{hint:n(()=>[t(E,{to:"https://github.com/tailwindlabs/tailwindcss/releases",target:"_blank",class:"underline"},{default:n(()=>[w(m(e.i18n.__("See release notes","windpress")),1)]),_:1})]),default:n(()=>[o("div",pe,[o("label",me,[q(o("input",{"onUpdate:modelValue":p[1]||(p[1]=l=>i(c).virtualOptions("general.tailwindcss.version",4).value=l),type:"radio",name:"tailwindcss_version",value:3,class:"sr-only"},null,512),[[V,i(c).virtualOptions("general.tailwindcss.version",4).value]]),o("span",null,m(i(re)),1)]),o("label",_e,[q(o("input",{"onUpdate:modelValue":p[2]||(p[2]=l=>i(c).virtualOptions("general.tailwindcss.version",4).value=l),type:"radio",name:"tailwindcss_version",value:4,class:"sr-only"},null,512),[[V,i(c).virtualOptions("general.tailwindcss.version",4).value]]),o("span",null,m(i(X)),1)])])]),_:1},8,["label","description"]),t(G),t(h,{label:e.i18n.__("Ubiquitous panel","windpress"),description:e.i18n.__("Access the WindPress dashboard panel right from the front page and made adjustment as it is on the wp-admin page.","windpress"),class:"flex items-center justify-between not-last:pb-4 gap-4"},{default:n(()=>[t(I,{modelValue:i(c).virtualOptions("general.ubiquitous-panel.enabled",!1).value,"onUpdate:modelValue":p[3]||(p[3]=l=>i(c).virtualOptions("general.ubiquitous-panel.enabled",!1).value=l),disabled:""},null,8,["modelValue"])]),_:1},8,["label","description"])]),_:1})]),_:1})],64)}}});export{ve as default};
