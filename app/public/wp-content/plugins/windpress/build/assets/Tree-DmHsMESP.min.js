import{r as me,c as ye}from"./index-l5GBeiGs.min.js";import{O as be,Q as he,R as oe,P as le,S as ke,T as xe,U as Ie,V as ae,F as Ke,W as Se,X as Te,D as de,Y as Ve,Z as Ce,$ as _e,a0 as te,a1 as ce,a2 as qe,s as ve,i as Ae,d as J,a3 as ie}from"./dashboard-DzHlilbd.js";import{w as N,a as Z}from"./runtime-dom.esm-bundler-CZCO9KQc.min.js";import{m as ne,a6 as q,r as we,s as Be,X as E,a1 as V,Y as w,j as z,u as c,an as F,n as pe,V as se,ag as ze,a7 as W,ao as $e,_ as M,F as fe,a0 as Le,ak as B,Z as Ee,$ as j,a2 as Fe,a3 as Re}from"./runtime-core.esm-bundler-HqF9pg4M.min.js";const ge=ne({__name:"RovingFocusItem",props:{tabStopId:{},focusable:{type:Boolean,default:!0},active:{type:Boolean},allowShiftKey:{type:Boolean},asChild:{type:Boolean},as:{default:"span"}},setup(r){const y=r,e=be(),f=he(),S=q(()=>y.tabStopId||f),a=q(()=>e.currentTabStopId.value===S.value),{getItems:T,CollectionItem:I}=oe();we(()=>{y.focusable&&e.onFocusableItemAdd()}),Be(()=>{y.focusable&&e.onFocusableItemRemove()});function u(t){if(t.key==="Tab"&&t.shiftKey){e.onItemShiftTab();return}if(t.target!==t.currentTarget)return;const p=ke(t,e.orientation.value,e.dir.value);if(p!==void 0){if(t.metaKey||t.ctrlKey||t.altKey||!y.allowShiftKey&&t.shiftKey)return;t.preventDefault();let g=[...T().map(m=>m.ref).filter(m=>m.dataset.disabled!=="")];if(p==="last")g.reverse();else if(p==="prev"||p==="next"){p==="prev"&&g.reverse();const m=g.indexOf(t.currentTarget);g=e.loop.value?xe(g,m+1):g.slice(m+1)}pe(()=>Ie(g))}}return(t,p)=>(V(),E(c(I),null,{default:w(()=>[z(c(le),{tabindex:a.value?0:-1,"data-orientation":c(e).orientation.value,"data-active":t.active?"":void 0,"data-disabled":t.focusable?void 0:"",as:t.as,"as-child":t.asChild,onMousedown:p[0]||(p[0]=g=>{t.focusable?c(e).onItemFocus(S.value):g.preventDefault()}),onFocus:p[1]||(p[1]=g=>c(e).onItemFocus(S.value)),onKeydown:u},{default:w(()=>[F(t.$slots,"default")]),_:3},8,["tabindex","data-orientation","data-active","data-disabled","as","as-child"])]),_:3}))}});function ee(r){return r.reduce((y,e)=>(y.push(e),e.children&&y.push(...ee(e.children)),y),[])}function We(r,y){const e=se(),f=(a,T)=>{if(y.multiple&&Array.isArray(r.value))if(y.selectionBehavior==="replace")r.value=[a],e.value=a;else{const I=r.value.findIndex(u=>T(u));I!==-1?r.value=r.value.filter((u,t)=>t!==I):r.value=[...r.value,a]}else y.selectionBehavior==="replace"?r.value={...a}:!Array.isArray(r.value)&&T(r.value)?r.value=void 0:r.value={...a};return r.value};function S(a,T,I,u){var g;if(!(e!=null&&e.value)||!y.multiple||!Array.isArray(r.value))return;const t=(g=I().filter(m=>m.ref.dataset.disabled!=="").find(m=>m.ref===T))==null?void 0:g.value;if(!t)return;let p=null;switch(a){case"prev":case"next":{p=ae(u,e.value,t);break}case"first":{p=ae(u,e.value,u==null?void 0:u[0]);break}case"last":{p=ae(u,e.value,u==null?void 0:u[u.length-1]);break}}r.value=p}return{firstValue:e,onSelectItem:f,handleMultipleReplace:S}}const[Me,Oe]=Ke("TreeRoot"),De=ne({__name:"TreeRoot",props:{modelValue:{},defaultValue:{},items:{},expanded:{},defaultExpanded:{},getKey:{},getChildren:{type:Function,default:r=>r.children},selectionBehavior:{default:"toggle"},multiple:{},dir:{},disabled:{type:Boolean},propagateSelect:{type:Boolean},bubbleSelect:{type:Boolean},asChild:{type:Boolean},as:{default:"ul"}},emits:["update:modelValue","update:expanded"],setup(r,{emit:y}){const e=r,f=y,{items:S,multiple:a,disabled:T,propagateSelect:I,dir:u,bubbleSelect:t}=ze(e),{handleTypeaheadSearch:p}=Se(),g=Te(u),m=se(),$=se(!1),v=Ve(),o=de(e,"modelValue",f,{defaultValue:e.defaultValue??(a.value?[]:void 0),passive:e.modelValue===void 0,deep:!0}),k=de(e,"expanded",f,{defaultValue:e.defaultExpanded??[],passive:e.expanded===void 0,deep:!0}),{onSelectItem:i,handleMultipleReplace:n}=We(o,e),l=q(()=>a.value&&Array.isArray(o.value)?o.value.map(s=>e.getKey(s)):[e.getKey(o.value??{})]);function C(s,d=1,b){return s.reduce((x,h,A)=>{const L=e.getKey(h),R=e.getChildren(h),Q=k.value.includes(L),U={_id:L,value:h,index:A,level:d,parentItem:b,hasChildren:!!R,bind:{value:h,level:d,"aria-setsize":s.length,"aria-posinset":A+1}};return x.push(U),R&&Q&&x.push(...C(R,d+1,h)),x},[])}const K=q(()=>{const s=e.items;return k.value.map(d=>d),C(s??[])});function _(s){var d;if($.value)v.trigger(s);else{const b=((d=m.value)==null?void 0:d.getItems())??[];p(s.key,b)}}function H(s){if($.value)return;const d=_e[s.key];pe(()=>{var b;n(d,te(),(b=m.value)==null?void 0:b.getItems,K.value.map(x=>x.value))})}function O(s){var d;if(s.parentItem!=null&&Array.isArray(o.value)&&e.multiple){const b=K.value.find(x=>s.parentItem!=null&&e.getKey(x.value)===e.getKey(s.parentItem));b!=null&&((d=e.getChildren(b.value))!=null&&d.every(x=>o.value.find(h=>e.getKey(h)===e.getKey(x)))?o.value=[...o.value,b.value]:o.value=o.value.filter(x=>e.getKey(x)!==e.getKey(b.value)),O(b))}}return Oe({modelValue:o,selectedKeys:l,onSelect:s=>{var x;const d=h=>e.getKey(h??{})===e.getKey(s),b=e.multiple&&Array.isArray(o.value)?((x=o.value)==null?void 0:x.findIndex(d))!==-1:void 0;if(i(s,d),e.bubbleSelect&&e.multiple&&Array.isArray(o.value)){const h=K.value.find(A=>e.getKey(A.value)===e.getKey(s));h!=null&&O(h)}if(e.propagateSelect&&e.multiple&&Array.isArray(o.value)){const h=ee(e.getChildren(s)??[]);b?o.value=[...o.value].filter(A=>!h.some(L=>e.getKey(A??{})===e.getKey(L))):o.value=[...o.value,...h]}},expanded:k,onToggle(s){if(!(s&&e.getChildren(s)))return;const d=e.getKey(s)??s;k.value.includes(d)?k.value=k.value.filter(b=>b!==d):k.value.push(d)},getKey:e.getKey,getChildren:e.getChildren,items:S,expandedItems:K,disabled:T,multiple:a,dir:g,propagateSelect:I,bubbleSelect:t,isVirtual:$,virtualKeydownHook:v,handleMultipleReplace:n}),(s,d)=>(V(),E(c(Ce),{ref_key:"rovingFocusGroupRef",ref:m,"as-child":"",orientation:"vertical",dir:c(g)},{default:w(()=>[z(c(le),{role:"tree",as:s.as,"as-child":s.asChild,"aria-multiselectable":c(a)?!0:void 0,onKeydown:[_,N(Z(H,["shift"]),["up","down"])]},{default:w(()=>[F(s.$slots,"default",{flattenItems:K.value,modelValue:c(o),expanded:c(k)})]),_:3},8,["as","as-child","aria-multiselectable","onKeydown"])]),_:3},8,["dir"]))}}),Pe="tree.select",Ge="tree.toggle",Xe=ne({inheritAttrs:!1,__name:"TreeItem",props:{value:{},level:{},asChild:{type:Boolean},as:{default:"li"}},emits:["select","toggle"],setup(r,{expose:y,emit:e}){const f=r,S=e,a=Me(),{getItems:T}=oe(),I=q(()=>!!a.getChildren(f.value)),u=q(()=>{const i=a.getKey(f.value);return a.expanded.value.includes(i)}),t=q(()=>{const i=a.getKey(f.value);return a.selectedKeys.value.includes(i)}),p=q(()=>{if(a.bubbleSelect.value&&I.value&&Array.isArray(a.modelValue.value)){const i=ee(a.getChildren(f.value)||[]);return i.some(n=>a.modelValue.value.find(l=>a.getKey(l)===a.getKey(n)))&&!i.every(n=>a.modelValue.value.find(l=>a.getKey(l)===a.getKey(n)))}else return a.propagateSelect.value&&t.value&&I.value&&Array.isArray(a.modelValue.value)?!ee(a.getChildren(f.value)||[]).every(i=>a.modelValue.value.find(n=>a.getKey(n)===a.getKey(i))):void 0});function g(i){if(I.value)if(u.value){const n=T().map(_=>_.ref),l=te(),C=n.indexOf(l),K=[...n].slice(C).find(_=>Number(_.getAttribute("data-indent"))===f.level+1);K&&K.focus()}else k(i)}function m(i){if(u.value)k(i);else{const n=T().map(_=>_.ref),l=te(),C=n.indexOf(l),K=[...n].slice(0,C).reverse().find(_=>Number(_.getAttribute("data-indent"))===f.level-1);K&&K.focus()}}async function $(i){S("select",i),!(i!=null&&i.defaultPrevented)&&a.onSelect(f.value)}async function v(i){S("toggle",i),!(i!=null&&i.defaultPrevented)&&a.onToggle(f.value)}async function o(i){if(!i)return;const n={originalEvent:i,value:f.value,isExpanded:u.value,isSelected:t.value};ce(Pe,$,n)}async function k(i){if(!i)return;const n={originalEvent:i,value:f.value,isExpanded:u.value,isSelected:t.value};ce(Ge,v,n)}return y({isExpanded:u,isSelected:t,isIndeterminate:p,handleToggle:()=>a.onToggle(f.value),handleSelect:()=>a.onSelect(f.value)}),(i,n)=>(V(),E(c(ge),{"as-child":"",value:i.value,"allow-shift-key":""},{default:w(()=>[z(c(le),W(i.$attrs,{role:"treeitem",as:i.as,"as-child":i.asChild,"aria-selected":t.value,"aria-expanded":I.value?u.value:void 0,"aria-level":i.level,"data-indent":i.level,"data-selected":t.value?"":void 0,"data-expanded":u.value?"":void 0,onKeydown:[N(Z(o,["self","prevent"]),["enter","space"]),n[0]||(n[0]=N(Z(l=>c(a).dir.value==="ltr"?g(l):m(l),["prevent"]),["right"])),n[1]||(n[1]=N(Z(l=>c(a).dir.value==="ltr"?m(l):g(l),["prevent"]),["left"]))],onClick:n[2]||(n[2]=Z(l=>{o(l),k(l)},["stop"]))}),{default:w(()=>[F(i.$slots,"default",{isExpanded:u.value,isSelected:t.value,isIndeterminate:p.value,handleSelect:()=>c(a).onSelect(i.value),handleToggle:()=>c(a).onToggle(i.value)})]),_:3},16,["as","as-child","aria-selected","aria-expanded","aria-level","data-indent","data-selected","data-expanded","onKeydown"])]),_:3},8,["value"]))}}),Ye={slots:{root:"relative isolate",item:"",listWithChildren:"ms-4.5 border-s border-default",itemWithChildren:"ps-1.5 -ms-px",link:"relative group w-full flex items-center text-sm before:absolute before:inset-y-px before:inset-x-0 before:z-[-1] before:rounded-md focus:outline-none focus-visible:outline-none focus-visible:before:ring-inset focus-visible:before:ring-2",linkLeadingIcon:"shrink-0",linkLabel:"truncate",linkTrailing:"ms-auto inline-flex gap-1.5 items-center",linkTrailingIcon:"shrink-0 transform transition-transform duration-200 group-data-expanded:rotate-180"},variants:{color:{primary:{link:"focus-visible:before:ring-primary"},secondary:{link:"focus-visible:before:ring-secondary"},success:{link:"focus-visible:before:ring-success"},info:{link:"focus-visible:before:ring-info"},warning:{link:"focus-visible:before:ring-warning"},error:{link:"focus-visible:before:ring-error"},neutral:{link:"focus-visible:before:ring-inverted"}},size:{xs:{link:"px-2 py-1 text-xs gap-1",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},sm:{link:"px-2.5 py-1.5 text-xs gap-1.5",linkLeadingIcon:"size-4",linkTrailingIcon:"size-4"},md:{link:"px-2.5 py-1.5 text-sm gap-1.5",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},lg:{link:"px-3 py-2 text-sm gap-2",linkLeadingIcon:"size-5",linkTrailingIcon:"size-5"},xl:{link:"px-3 py-2 text-base gap-2",linkLeadingIcon:"size-6",linkTrailingIcon:"size-6"}},selected:{true:{link:"before:bg-elevated"},false:{link:["hover:not-disabled:text-highlighted hover:not-disabled:before:bg-elevated/50","transition-colors before:transition-colors"]}},disabled:{true:{link:"cursor-not-allowed opacity-75"}}},compoundVariants:[{color:"primary",selected:!0,class:{link:"text-primary"}},{color:"secondary",selected:!0,class:{link:"text-secondary"}},{color:"success",selected:!0,class:{link:"text-success"}},{color:"info",selected:!0,class:{link:"text-info"}},{color:"warning",selected:!0,class:{link:"text-warning"}},{color:"error",selected:!0,class:{link:"text-error"}},{color:"neutral",selected:!0,class:{link:"text-highlighted"}}],defaultVariants:{color:"primary",size:"md"}},Ze=["disabled"],je={__name:"Tree",props:{as:{type:null,required:!1},color:{type:null,required:!1},size:{type:null,required:!1},valueKey:{type:null,required:!1,default:"value"},labelKey:{type:null,required:!1,default:"label"},trailingIcon:{type:String,required:!1},expandedIcon:{type:String,required:!1},collapsedIcon:{type:String,required:!1},items:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},expanded:{type:Array,required:!1},defaultExpanded:{type:Array,required:!1},selectionBehavior:{type:String,required:!1},propagateSelect:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},bubbleSelect:{type:Boolean,required:!1}},emits:["update:expanded","update:modelValue"],setup(r,{emit:y}){const e=r,f=y,S=$e(),a=Ae(),T=qe(me(e,"as","modelValue","defaultValue","items","multiple","expanded","disabled","propagateSelect","bubbleSelect"),f),[I,u]=ye(),t=q(()=>{var v;return ve({extend:ve(Ye),...((v=a.ui)==null?void 0:v.tree)||{}})({color:e.color,size:e.size})});function p(v){return ie(v,e.labelKey)}function g(v){return ie(v,e.valueKey)??ie(v,e.labelKey)}function m(v){var i;const o=v.defaultExpanded?g(v):null,k=((i=v.children)==null?void 0:i.flatMap(n=>m(n)))??[];return[o,...k].filter(Boolean)}const $=q(()=>{var v;return e.defaultExpanded??((v=e.items)==null?void 0:v.flatMap(o=>m(o)))});return(v,o)=>{var k;return V(),M(fe,null,[z(c(I),null,{default:w(({items:i,level:n})=>[(V(!0),M(fe,null,Le(i,(l,C)=>{var K,_,H,O;return V(),M("li",{key:`${n}-${C}`,class:B(n>0?t.value.itemWithChildren({class:[(K=e.ui)==null?void 0:K.itemWithChildren,(_=l.ui)==null?void 0:_.itemWithChildren]}):t.value.item({class:[(H=e.ui)==null?void 0:H.item,(O=l.ui)==null?void 0:O.item]}))},[z(c(Xe),{"as-child":"",level:n,value:l,onToggle:l.onToggle,onSelect:l.onSelect},{default:w(({isExpanded:s,isSelected:d})=>{var b,x,h,A,L;return[Ee("button",{disabled:l.disabled||r.disabled,class:B(t.value.link({class:[(b=e.ui)==null?void 0:b.link,(x=l.ui)==null?void 0:x.link,l.class],selected:d,disabled:l.disabled||r.disabled}))},[F(v.$slots,l.slot||"item",W({ref_for:!0},{index:C,level:n,expanded:s,selected:d},{item:l}),()=>{var R,Q,U,re,ue;return[F(v.$slots,l.slot?`${l.slot}-leading`:"item-leading",W({ref_for:!0},{index:C,level:n,expanded:s,selected:d},{item:l}),()=>{var D,P,G,X,Y;return[l.icon?(V(),E(J,{key:0,name:l.icon,class:B(t.value.linkLeadingIcon({class:[(D=e.ui)==null?void 0:D.linkLeadingIcon,(P=l.ui)==null?void 0:P.linkLeadingIcon]}))},null,8,["name","class"])):(G=l.children)!=null&&G.length?(V(),E(J,{key:1,name:s?r.expandedIcon??c(a).ui.icons.folderOpen:r.collapsedIcon??c(a).ui.icons.folder,class:B(t.value.linkLeadingIcon({class:[(X=e.ui)==null?void 0:X.linkLeadingIcon,(Y=l.ui)==null?void 0:Y.linkLeadingIcon]}))},null,8,["name","class"])):j("",!0)]}),p(l)||S[l.slot?`${l.slot}-label`:"item-label"]?(V(),M("span",{key:0,class:B(t.value.linkLabel({class:[(R=e.ui)==null?void 0:R.linkLabel,(Q=l.ui)==null?void 0:Q.linkLabel]}))},[F(v.$slots,l.slot?`${l.slot}-label`:"item-label",W({ref_for:!0},{item:l,index:C,level:n,expanded:s,selected:d},{item:l}),()=>[Fe(Re(p(l)),1)])],2)):j("",!0),l.trailingIcon||(U=l.children)!=null&&U.length||S[l.slot?`${l.slot}-trailing`:"item-trailing"]?(V(),M("span",{key:1,class:B(t.value.linkTrailing({class:[(re=e.ui)==null?void 0:re.linkTrailing,(ue=l.ui)==null?void 0:ue.linkTrailing]}))},[F(v.$slots,l.slot?`${l.slot}-trailing`:"item-trailing",W({ref_for:!0},{item:l,index:C,level:n,expanded:s,selected:d},{item:l}),()=>{var D,P,G,X,Y;return[l.trailingIcon?(V(),E(J,{key:0,name:l.trailingIcon,class:B(t.value.linkTrailingIcon({class:[(D=e.ui)==null?void 0:D.linkTrailingIcon,(P=l.ui)==null?void 0:P.linkTrailingIcon]}))},null,8,["name","class"])):(G=l.children)!=null&&G.length?(V(),E(J,{key:1,name:r.trailingIcon??c(a).ui.icons.chevronDown,class:B(t.value.linkTrailingIcon({class:[(X=e.ui)==null?void 0:X.linkTrailingIcon,(Y=l.ui)==null?void 0:Y.linkTrailingIcon]}))},null,8,["name","class"])):j("",!0)]})],2)):j("",!0)]})],10,Ze),(h=l.children)!=null&&h.length&&s?(V(),M("ul",{key:0,class:B(t.value.listWithChildren({class:[(A=e.ui)==null?void 0:A.listWithChildren,(L=l.ui)==null?void 0:L.listWithChildren]}))},[z(c(u),{items:l.children,level:n+1},null,8,["items","level"])],2)):j("",!0)]}),_:2},1032,["level","value","onToggle","onSelect"])],2)}),128))]),_:3}),z(c(De),W(c(T),{class:t.value.root({class:[(k=e.ui)==null?void 0:k.root,e.class]}),"get-key":g,"default-expanded":$.value,"selection-behavior":r.selectionBehavior}),{default:w(()=>[z(c(u),{items:r.items,level:0},null,8,["items"])]),_:1},16,["class","default-expanded","selection-behavior"])],64)}}};export{je as _,ge as a};
